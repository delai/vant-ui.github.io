import{h as U,G as Z,n as _,c as j,J as z,s as Y,Y as Q,Z as W,l as p,q as ee,H as te}from"./use-translate-982dff2e.js";import{u as ae}from"./use-touch-87b155f0.js";import{A as ne,y,D as A,e as V}from"./vue-libs-6a67f9c6.js";import{c as B,n as D,w as re}from"./with-install-3eab31d5.js";const[ie,f]=j("slider"),le={min:B(0),max:B(100),step:B(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:D,buttonSize:D,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}},oe=ne({name:ie,props:le,emits:["change","dragEnd","dragStart","update:modelValue"],setup(t,{emit:b,slots:S}){let N,d,o;const C=y(),x=[y(),y()],u=y(),g=ae(),m=A(()=>Number(t.max)-Number(t.min)),H=A(()=>{const e=t.vertical?"width":"height";return{background:t.inactiveColor,[e]:U(t.barHeight)}}),c=e=>t.range&&Array.isArray(e),M=()=>{const{modelValue:e,min:a}=t;return c(e)?`${(e[1]-e[0])*100/m.value}%`:`${(e-Number(a))*100/m.value}%`},R=()=>{const{modelValue:e,min:a}=t;return c(e)?`${(e[0]-Number(a))*100/m.value}%`:"0%"},X=A(()=>{const a={[t.vertical?"height":"width"]:M(),background:t.activeColor};u.value&&(a.transition="none");const n=()=>t.vertical?t.reverse?"bottom":"top":t.reverse?"right":"left";return a[n()]=R(),a}),h=e=>{const a=+t.min,n=+t.max,l=+t.step;e=te(e,a,n);const r=Math.round((e-a)/l)*l;return W(a,r)},P=()=>{const e=t.modelValue;c(e)?o=e.map(h):o=h(e)},$=e=>{const a=e[0]??Number(t.min),n=e[1]??Number(t.max);return a>n?[n,a]:[a,n]},s=(e,a)=>{c(e)?e=$(e).map(h):e=h(e),z(e,t.modelValue)||b("update:modelValue",e),a&&!z(e,o)&&b("change",e)},I=e=>{if(e.stopPropagation(),t.disabled||t.readonly)return;P();const{min:a,reverse:n,vertical:l,modelValue:r}=t,i=Y(C),K=()=>l?n?i.bottom-e.clientY:e.clientY-i.top:n?i.right-e.clientX:e.clientX-i.left,L=l?i.height:i.width,v=Number(a)+K()/L*m.value;if(c(r)){const[k,E]=r,O=(k+E)/2;v<=O?s([v,E],!0):s([k,v],!0)}else s(v,!0)},q=e=>{t.disabled||t.readonly||(g.start(e),d=t.modelValue,P(),u.value="start")},F=e=>{if(t.disabled||t.readonly)return;u.value==="start"&&b("dragStart",e),p(e,!0),g.move(e),u.value="dragging";const a=Y(C),n=t.vertical?g.deltaY.value:g.deltaX.value,l=t.vertical?a.height:a.width;let r=n/l*m.value;if(t.reverse&&(r=-r),c(o)){const i=t.reverse?1-N:N;d[i]=o[i]+r}else d=o+r;s(d)},T=e=>{t.disabled||t.readonly||(u.value==="dragging"&&(s(d,!0),b("dragEnd",e)),u.value="")},G=e=>typeof e=="number"?f("button-wrapper",["left","right"][e]):f("button-wrapper",t.reverse?"left":"right"),J=(e,a)=>{if(typeof a=="number"){const n=S[a===0?"left-button":"right-button"];if(n)return n({value:e})}return S.button?S.button({value:e}):V("div",{class:f("button"),style:ee(t.buttonSize)},null)},w=e=>{const a=typeof e=="number"?t.modelValue[e]:t.modelValue;return V("div",{ref:x[e??0],role:"slider",class:G(e),tabindex:t.disabled?void 0:0,"aria-valuemin":t.min,"aria-valuenow":a,"aria-valuemax":t.max,"aria-disabled":t.disabled||void 0,"aria-readonly":t.readonly||void 0,"aria-orientation":t.vertical?"vertical":"horizontal",onTouchstartPassive:n=>{typeof e=="number"&&(N=e),q(n)},onTouchend:T,onTouchcancel:T,onClick:Q},[J(a,e)])};return s(t.modelValue),Z(()=>t.modelValue),x.forEach(e=>{_("touchmove",F,{target:e})}),()=>V("div",{ref:C,style:H.value,class:f({vertical:t.vertical,disabled:t.disabled}),onClick:I},[V("div",{class:f("bar"),style:X.value},[t.range?[w(0),w(1)]:w()])])}}),ue=re(oe),fe=ue;export{fe as V};
