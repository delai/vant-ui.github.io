import{p as k}from"./Picker-148e7dea.js";import{u as C}from"./use-expose-963cf204.js";import{P as V}from"./index-e6c4e9e4.js";import{A as b,y as d,D as A,u as P,e as E,B as _}from"./vue-libs-12a1683e.js";import{p as O,c as N,e as S}from"./use-translate-eec47ef5.js";import{c as T,b as x,w as I}from"./with-install-99dfa70d.js";const p="000000",M=["title","cancel","confirm","toolbar","columns-top","columns-bottom"],j=["title","loading","readonly","optionHeight","swipeDuration","visibleOptionNum","cancelButtonText","confirmButtonText"],r=(s="",c=p,e=void 0)=>({text:s,value:c,children:e});function D({areaList:s,columnsNum:c,columnsPlaceholder:e}){const{city_list:o={},county_list:l={},province_list:f={}}=s,m=+c>1,u=+c>2,h=()=>{if(m)return e.length?[r(e[0],p,u?[]:void 0)]:[]},t=new Map;Object.keys(f).forEach(n=>{t.set(n.slice(0,2),r(f[n],n,h()))});const i=new Map;if(m){const n=()=>{if(u)return e.length?[r(e[1])]:[]};Object.keys(o).forEach(a=>{const v=r(o[a],a,n());i.set(a.slice(0,4),v);const y=t.get(a.slice(0,2));y&&y.children.push(v)})}u&&Object.keys(l).forEach(n=>{const a=i.get(n.slice(0,4));a&&a.children.push(r(l[n],n))});const g=Array.from(t.values());if(e.length){const n=u?[r(e[2])]:void 0,a=m?[r(e[1],p,n)]:void 0;g.unshift(r(e[0],p,a))}return g}const[R,B]=N("area"),H=S({},k,{modelValue:String,columnsNum:T(3),columnsPlaceholder:x(),areaList:{type:Object,default:()=>({})}}),w=b({name:R,props:H,emits:["change","confirm","cancel","update:modelValue"],setup(s,{emit:c,slots:e}){const o=d([]),l=d(),f=A(()=>D(s)),m=(...t)=>c("change",...t),u=(...t)=>c("cancel",...t),h=(...t)=>c("confirm",...t);return P(o,t=>{const i=t.length?t[t.length-1]:"";i&&i!==s.modelValue&&c("update:modelValue",i)},{deep:!0}),P(()=>s.modelValue,t=>{if(t){const i=o.value.length?o.value[o.value.length-1]:"";t!==i&&(o.value=[`${t.slice(0,2)}0000`,`${t.slice(0,4)}00`,t].slice(0,+s.columnsNum))}else o.value=[]},{immediate:!0}),C({confirm:()=>{var t;return(t=l.value)==null?void 0:t.confirm()},getSelectedOptions:()=>{var t;return((t=l.value)==null?void 0:t.getSelectedOptions())||[]}}),()=>E(V,_({ref:l,modelValue:o.value,"onUpdate:modelValue":t=>o.value=t,class:B(),columns:f.value,onChange:m,onCancel:u,onConfirm:h},O(s,j)),O(e,M))}}),L=I(w),G=L;export{p as A,G as V,L as a};
