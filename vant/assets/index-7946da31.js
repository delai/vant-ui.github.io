import{V as x,b as Y}from"./index-ebb73d3f.js";import{V as z}from"./index-c6c98967.js";import{V as I}from"./index-89a6df72.js";import{h as S,a0 as M,c as R,a as L}from"./use-translate-ad5eefa4.js";import{u as $}from"./use-lock-scroll-a0e7292b.js";import{u as E}from"./use-touch-87b155f0.js";import{u as G}from"./use-sync-prop-ref-011d5386.js";import{A as U,y as _,D as y,u as W,e as a,o as V,c as j,w as h,C as e,a as q,F as J,b as K,d as p,t as D}from"./vue-libs-6a67f9c6.js";import{c as A,b as Q,t as k,w as X}from"./with-install-0d9206aa.js";import"./use-id-5464e261.js";import"./use-expose-c87283be.js";import"./use-route-ea8124d0.js";import"./index-4437616e.js";import"./index-386f5015.js";import"./on-popup-reopen-2b57f4ff.js";import"./use-refs-4e2d69f7.js";import"./index-a81fbffb.js";import"./constant-00b7fd44.js";import"./interceptor-e18d38f8.js";import"./index-1c02023b.js";const{height:Z}=M(),tt={height:A(0),anchors:Q(),duration:A(.2),contentDraggable:k,safeAreaInsetBottom:k},[et,b]=R("floating-panel"),H=.2,at=U({name:et,props:tt,emits:["heightChange","update:height"],setup(n,{emit:d,slots:s}){const g=_(),c=_(),o=G(()=>+n.height,t=>d("update:height",t)),l=y(()=>({min:n.anchors[0]??100,max:n.anchors[n.anchors.length-1]??Math.round(Z.value*.6)})),m=y(()=>n.anchors.length>=2?n.anchors:[l.value.min,l.value.max]),w=_(!1),B=y(()=>({height:S(l.value.max),transform:`translateY(calc(100% + ${S(-o.value)}))`,transition:w.value?"none":`transform ${n.duration}s`})),F=t=>{const r=Math.abs(t),{min:u,max:i}=l.value;return r>i?-(i+(r-i)*H):r<u?-(u-(u-r)*H):t},C=(t,r)=>t.reduce((u,i)=>Math.abs(u-r)<Math.abs(i-r)?u:i);let f;const v=E(),N=t=>{v.start(t),w.value=!0,f=-o.value},O=t=>{var i;v.move(t);const r=t.target;if(c.value===r||(i=c.value)!=null&&i.contains(r)){if(!n.contentDraggable)return;if(-f<l.value.max)t.cancelable&&t.preventDefault(),t.stopPropagation();else if(!(c.value.scrollTop<=0&&v.deltaY.value>0))return}const u=v.deltaY.value+f;o.value=-F(u)},T=()=>{w.value=!1,o.value=C(m.value,o.value),o.value!==-f&&d("heightChange",{height:o.value})};return W(l,()=>{o.value=C(m.value,o.value)},{immediate:!0}),$(g,()=>!0),()=>{var t;return a("div",{class:[b(),{"van-safe-area-bottom":n.safeAreaInsetBottom}],ref:g,style:B.value,onTouchstartPassive:N,onTouchmove:O,onTouchend:T,onTouchcancel:T},[a("div",{class:b("header")},[a("div",{class:b("header-bar")},null)]),a("div",{class:b("content"),ref:c},[(t=s.default)==null?void 0:t.call(s)])])}}}),nt=X(at),P=nt,ot={style:{"text-align":"center",padding:"15px"}},rt={style:{"text-align":"center",padding:"15px"}},Tt=U({__name:"index",setup(n){const{height:d}=M(),s=L({"zh-CN":{customAnchors:"自定义锚点",headDragOnly:"仅头部拖拽",panelShowHeight:"面板显示高度",contentUnDrag:"内容不可拖拽"},"en-US":{customAnchors:"Custom Anchors",headDragOnly:"Head Drag Only",panelShowHeight:"Panel Show Height",contentUnDrag:"Content cannot be dragged"}}),g=[100,Math.round(.4*d.value),Math.round(.7*d.value)],c=_(g[0]);return(o,l)=>(V(),j(e(Y),null,{default:h(()=>[a(e(x),{title:e(s)("basicUsage")},{default:h(()=>[a(e(P),null,{default:h(()=>[a(e(I),null,{default:h(()=>[(V(),q(J,null,K(26,m=>a(e(z),{key:m,title:String.fromCharCode(m+64),size:"large"},null,8,["title"])),64))]),_:1})]),_:1})]),_:1},8,["title"]),a(e(x),{title:e(s)("customAnchors")},{default:h(()=>[a(e(P),{height:c.value,"onUpdate:height":l[0]||(l[0]=m=>c.value=m),anchors:g},{default:h(()=>[p("div",ot,[p("p",null,D(e(s)("panelShowHeight"))+" "+D(c.value)+" px",1)])]),_:1},8,["height"])]),_:1},8,["title"]),a(e(x),{title:e(s)("headDragOnly")},{default:h(()=>[a(e(P),{"content-draggable":!1},{default:h(()=>[p("div",rt,[p("p",null,D(e(s)("contentUnDrag")),1)])]),_:1})]),_:1},8,["title"])]),_:1}))}});export{Tt as default};
