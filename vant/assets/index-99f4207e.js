import{u as H}from"./use-id-5464e261.js";import{b as F,O as K,i as L,$ as Q,n as Y,c as M,s as Z,r as q,u as G,t as J,a as X}from"./use-translate-982dff2e.js";import{A as E,y as b,D as I,e,H as ee,S as te,Q as oe,j as le,v as ne,B as ae,r as ie,o as se,a as ue,w as c,C as o,d as re,g as de,t as pe,F as ce}from"./vue-libs-6a67f9c6.js";import{t as S,n as me,c as ve,m as fe,w as N,b as Ve,u as z}from"./with-install-3eab31d5.js";import{H as we}from"./constant-00b7fd44.js";import{u as Ce}from"./use-expose-1bc17a0b.js";import{C as xe,V as $}from"./index-85bc3cbb.js";import{I as be}from"./index-e4434a2e.js";import{P as ge}from"./index-b2934b31.js";import{V as B}from"./index-50459bbe.js";import{V as ye}from"./index-eeca961e.js";import"./use-route-ea8124d0.js";import"./index-65b13139.js";import"./use-touch-87b155f0.js";import"./use-lazy-render-7199096a.js";import"./on-popup-reopen-2b57f4ff.js";import"./index-bef8ed4f.js";import"./interceptor-5aa62d1f.js";import"./index-265efaae.js";const[W,T]=M("dropdown-menu"),Oe={overlay:S,zIndex:me,duration:ve(.2),direction:fe("down"),activeColor:String,closeOnClickOutside:S,closeOnClickOverlay:S},R=Symbol(W),ke=E({name:W,props:Oe,setup(a,{slots:s}){const m=H(),C=b(),u=b(),i=b(0),{children:d,linkChildren:v}=F(R),x=K(C),g=I(()=>d.some(r=>r.state.showWrapper)),y=I(()=>{if(g.value&&L(a.zIndex))return{zIndex:+a.zIndex+1}}),l=()=>{a.closeOnClickOutside&&d.forEach(r=>{r.toggle(!1)})},V=()=>{if(u.value){const r=Z(u);a.direction==="down"?i.value=r.bottom:i.value=q.value-r.top}},n=()=>{g.value&&V()},U=r=>{d.forEach((t,p)=>{p===r?t.toggle():t.state.showPopup&&t.toggle(!1,{immediate:!0})})},A=(r,t)=>{const{showPopup:p}=r.state,{disabled:f,titleClass:O}=r;return e("div",{id:`${m}-${t}`,role:"button",tabindex:f?void 0:0,class:[T("item",{disabled:f}),{[we]:!f}],onClick:()=>{f||U(t)}},[e("span",{class:[T("title",{down:p===(a.direction==="down"),active:p}),O],style:{color:p?a.activeColor:""}},[e("div",{class:"van-ellipsis"},[r.renderTitle()])])])};return v({id:m,props:a,offset:i,updateOffset:V}),Q(C,l),Y("scroll",n,{target:x,passive:!0}),()=>{var r;return e("div",{ref:C,class:T()},[e("div",{ref:u,style:y.value,class:T("bar",{opened:g.value})},[d.map(A)]),(r=s.default)==null?void 0:r.call(s)])}}}),Pe=N(ke),P=Pe;function he(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!oe(a)}const[Te,D]=M("dropdown-item"),De={title:String,options:Ve(),disabled:Boolean,teleport:[String,Object],lazyRender:S,modelValue:z,titleClass:z},Se=E({name:Te,inheritAttrs:!1,props:De,emits:["open","opened","close","closed","change","update:modelValue"],setup(a,{emit:s,slots:m,attrs:C}){const u=ee({showPopup:!1,transition:!0,showWrapper:!1}),{parent:i,index:d}=G(R);if(!i)return;const v=t=>()=>s(t),x=v("open"),g=v("close"),y=v("opened"),l=()=>{u.showWrapper=!1,s("closed")},V=t=>{a.teleport&&t.stopPropagation()},n=(t=!u.showPopup,p={})=>{t!==u.showPopup&&(u.showPopup=t,u.transition=!p.immediate,t&&(i.updateOffset(),u.showWrapper=!0))},U=()=>{if(m.title)return m.title();if(a.title)return a.title;const t=a.options.find(p=>p.value===a.modelValue);return t?t.text:""},A=t=>{const{activeColor:p}=i.props,f=t.value===a.modelValue,O=()=>{u.showPopup=!1,t.value!==a.modelValue&&(s("update:modelValue",t.value),s("change",t.value))},k=()=>{if(f)return e(be,{class:D("icon"),color:p,name:"success"},null)};return e(xe,{role:"menuitem",key:t.value,icon:t.icon,title:t.text,class:D("option",{active:f}),style:{color:f?p:""},tabindex:f?0:-1,clickable:!0,onClick:O},{value:k})},r=()=>{const{offset:t}=i,{zIndex:p,overlay:f,duration:O,direction:k,closeOnClickOverlay:j}=i.props,_=J(p);return k==="down"?_.top=`${t.value}px`:_.bottom=`${t.value}px`,le(e("div",ae({style:_,class:D([k]),onClick:V},C),[e(ge,{show:u.showPopup,"onUpdate:show":h=>u.showPopup=h,role:"menu",class:D("content"),overlay:f,position:k==="down"?"top":"bottom",duration:u.transition?O:0,lazyRender:a.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${i.id}-${d.value}`,closeOnClickOverlay:j,onOpen:x,onClose:g,onOpened:y,onClosed:l},{default:()=>{var h;return[a.options.map(A),(h=m.default)==null?void 0:h.call(m)]}})]),[[ne,u.showWrapper]])};return Ce({state:u,toggle:n,renderTitle:U}),()=>{if(a.teleport){let t;return e(te,{to:a.teleport},he(t=r())?t:{default:()=>[t]})}return r()}}}),Ie=N(Se),w=Ie,Ue={style:{padding:"5px 16px"}},Ge=E({__name:"index",setup(a){const s=X({"zh-CN":{disableMenu:"禁用菜单",switchTitle1:"包邮",switchTitle2:"团购",itemTitle:"筛选",expandDirection:"向上展开",customContent:"自定义菜单内容",customActiveColor:"自定义选中态颜色",option1:[{text:"全部商品",value:0},{text:"新款商品",value:1},{text:"活动商品",value:2}],option2:[{text:"默认排序",value:"a"},{text:"好评排序",value:"b"},{text:"销量排序",value:"c"}]},"en-US":{disableMenu:"Disable Menu",switchTitle1:"Title",switchTitle2:"Title",itemTitle:"Title",expandDirection:"Expand Direction",customContent:"Custom Content",customActiveColor:"Custom Active Color",option1:[{text:"Option1",value:0},{text:"Option2",value:1},{text:"Option3",value:2}],option2:[{text:"Option A",value:"a"},{text:"Option B",value:"b"},{text:"Option C",value:"c"}]}}),m=b(),C=b(!0),u=b(!1),i=b(0),d=b("a"),v=I(()=>s("option1")),x=I(()=>s("option2")),g=()=>{var y;(y=m.value)==null||y.toggle()};return(y,l)=>{const V=ie("demo-block");return se(),ue(ce,null,[e(V,{title:o(s)("basicUsage")},{default:c(()=>[e(o(P),null,{default:c(()=>[e(o(w),{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=n=>i.value=n),options:v.value},null,8,["modelValue","options"]),e(o(w),{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=n=>d.value=n),options:x.value},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"]),e(V,{title:o(s)("customContent")},{default:c(()=>[e(o(P),null,{default:c(()=>[e(o(w),{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=n=>i.value=n),options:v.value},null,8,["modelValue","options"]),e(o(w),{title:o(s)("itemTitle"),ref_key:"item",ref:m},{default:c(()=>[e(o($),{center:"",title:o(s)("switchTitle1")},{"right-icon":c(()=>[e(o(B),{modelValue:C.value,"onUpdate:modelValue":l[3]||(l[3]=n=>C.value=n)},null,8,["modelValue"])]),_:1},8,["title"]),e(o($),{center:"",title:o(s)("switchTitle2")},{"right-icon":c(()=>[e(o(B),{modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=n=>u.value=n)},null,8,["modelValue"])]),_:1},8,["title"]),re("div",Ue,[e(o(ye),{type:"primary",block:"",round:"",style:{height:"40px"},onClick:g},{default:c(()=>[de(pe(o(s)("confirm")),1)]),_:1})])]),_:1},8,["title"])]),_:1})]),_:1},8,["title"]),e(V,{title:o(s)("customActiveColor")},{default:c(()=>[e(o(P),{"active-color":"#ee0a24"},{default:c(()=>[e(o(w),{modelValue:i.value,"onUpdate:modelValue":l[5]||(l[5]=n=>i.value=n),options:v.value},null,8,["modelValue","options"]),e(o(w),{modelValue:d.value,"onUpdate:modelValue":l[6]||(l[6]=n=>d.value=n),options:x.value},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"]),e(V,{title:o(s)("expandDirection")},{default:c(()=>[e(o(P),{direction:"up"},{default:c(()=>[e(o(w),{modelValue:i.value,"onUpdate:modelValue":l[7]||(l[7]=n=>i.value=n),options:v.value},null,8,["modelValue","options"]),e(o(w),{modelValue:d.value,"onUpdate:modelValue":l[8]||(l[8]=n=>d.value=n),options:x.value},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"]),e(V,{title:o(s)("disableMenu")},{default:c(()=>[e(o(P),null,{default:c(()=>[e(o(w),{modelValue:i.value,"onUpdate:modelValue":l[9]||(l[9]=n=>i.value=n),disabled:"",options:v.value},null,8,["modelValue","options"]),e(o(w),{modelValue:d.value,"onUpdate:modelValue":l[10]||(l[10]=n=>d.value=n),disabled:"",options:x.value},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"])],64)}}});export{Ge as default};
