import{n as P,c as U,a as B}from"./use-translate-769ce24f.js";import{A as k,u as h,M,x as F,e as s,r as I,o as L,a as W,w as _,C as t,F as j}from"./vue-libs-be453a05.js";import{c as q,m as g,w as D}from"./with-install-d98d04c2.js";const[G,V]=U("text-ellipsis"),J={rows:q(1),content:g(""),expandText:g(""),collapseText:g("")},K=k({name:G,props:J,emits:["clickAction"],setup(o,{emit:w}){const r=h(""),e=h(!1),x=h(!1),p=h(),a=l=>{if(!l)return 0;const u=l.match(/^\d*(\.\d*)?/);return u?Number(u[0]):0},y=()=>{const l=()=>{if(!p.value)return;const i=window.getComputedStyle(p.value),n=document.createElement("div");return Array.prototype.slice.apply(i).forEach(m=>{n.style.setProperty(m,i.getPropertyValue(m))}),n.style.position="fixed",n.style.zIndex="-9999",n.style.top="-9999px",n.style.height="auto",n.style.minHeight="auto",n.style.maxHeight="auto",n.innerText=o.content,document.body.appendChild(n),n},u=(i,n)=>{const{content:d,expandText:m}=o,E="...";let v=0,T=d.length,N=-1;for(;v<=T;){const f=Math.floor((v+T)/2);i.innerText=d.slice(0,f)+E+m,i.offsetHeight<=n?(v=f+1,N=f):T=f-1}return d.slice(0,N)+E},c=l();if(!c)return;const{paddingBottom:R,paddingTop:S,lineHeight:z}=c.style,b=(Number(o.rows)+.5)*a(z)+a(S)+a(R);b<c.offsetHeight?(x.value=!0,r.value=u(c,b)):(x.value=!1,r.value=o.content),document.body.removeChild(c)},A=l=>{e.value=!e.value,w("clickAction",l)},H=()=>s("span",{class:V("action"),onClick:A},[e.value?o.collapseText:o.expandText]);return M(y),F(()=>[o.content,o.rows],y),P("resize",y),()=>s("div",{ref:p,class:V()},[e.value?o.content:r.value,x.value?H():null])}}),O=D(K),C=O,Z=k({__name:"index",setup(o){const e=B({"zh-CN":{text:"Vant 是一个轻量、可定制的移动端组件库，于2017年开源。目前 Vant 官方提供了 Vue 2 版本、Vue 3 版本和微信小程序版本，并由社区团队维护 React 版本和支付宝小程序版本。",expandText:"展开",collapseText:"收起",expandCollapse:"展开/收起",customRows:"自定义展示行数"},"en-US":{text:"Vant is a lightweight, customizable mobile component library that was open sourced in 2017. Currently Vant officially provides Vue 2 version, Vue 3 version and WeChat applet version, and the community team maintains React version and Alipay applet version.",expandText:"expand",collapseText:"collapse",expandCollapse:"Expand/Collapse",customRows:"Customize Rows"}});return(x,p)=>{const a=I("demo-block");return L(),W(j,null,[s(a,{title:t(e)("basicUsage")},{default:_(()=>[s(t(C),{content:t(e)("text")},null,8,["content"])]),_:1},8,["title"]),s(a,{title:t(e)("expandCollapse")},{default:_(()=>[s(t(C),{content:t(e)("text"),"expand-text":t(e)("expandText"),"collapse-text":t(e)("collapseText")},null,8,["content","expand-text","collapse-text"])]),_:1},8,["title"]),s(a,{title:t(e)("customRows")},{default:_(()=>[s(t(C),{rows:"3",content:t(e)("text"),"expand-text":t(e)("expandText"),"collapse-text":t(e)("collapseText")},null,8,["content","expand-text","collapse-text"])]),_:1},8,["title"])],64)}}});export{Z as default};
