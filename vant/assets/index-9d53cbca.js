import{f as F,s as O,a as s,g as w,p as T}from"./utils-8aedfd6c.js";import{P as A}from"./index-74529a7d.js";import{A as I,y as N,D as B,u as D,e as E,B as J}from"./vue-libs-12a1683e.js";import{J as f,p as K,c as R,e as S,V as g}from"./use-translate-113fec30.js";import{w as U}from"./with-install-a70dfb01.js";const h=new Date().getFullYear(),[_]=R("date-picker"),b=S({},O,{columnsType:{type:Array,default:()=>["year","month","day"]},minDate:{type:Date,default:()=>new Date(h-10,0,1),validator:g},maxDate:{type:Date,default:()=>new Date(h+10,11,31),validator:g}}),j=I({name:_,props:b,emits:["confirm","cancel","change","update:modelValue"],setup(t,{emit:r,slots:y}){const n=N(t.modelValue),x=()=>{const e=t.minDate.getFullYear(),a=t.maxDate.getFullYear();return s(e,a,"year",t.formatter,t.filter)},i=e=>e===t.minDate.getFullYear(),l=e=>e===t.maxDate.getFullYear(),M=e=>e===t.minDate.getMonth()+1,Y=e=>e===t.maxDate.getMonth()+1,c=e=>{const{minDate:a,columnsType:o}=t,m=o.indexOf(e),d=n.value[m];if(d)return+d;switch(e){case"year":return a.getFullYear();case"month":return a.getMonth()+1;case"day":return a.getDate()}},V=()=>{const e=c("year"),a=i(e)?t.minDate.getMonth()+1:1,o=l(e)?t.maxDate.getMonth()+1:12;return s(a,o,"month",t.formatter,t.filter)},v=()=>{const e=c("year"),a=c("month"),o=i(e)&&M(a)?t.minDate.getDate():1,m=l(e)&&Y(a)?t.maxDate.getDate():w(e,a);return s(o,m,"day",t.formatter,t.filter)},u=B(()=>t.columnsType.map(e=>{switch(e){case"year":return x();case"month":return V();case"day":return v();default:return[]}}));D(n,e=>{f(e,t.modelValue)||r("update:modelValue",e)}),D(()=>t.modelValue,e=>{e=F(e,u.value),f(e,n.value)||(n.value=e)},{immediate:!0});const P=(...e)=>r("change",...e),k=(...e)=>r("cancel",...e),C=(...e)=>r("confirm",...e);return()=>E(A,J({modelValue:n.value,"onUpdate:modelValue":e=>n.value=e,columns:u.value,onChange:P,onCancel:k,onConfirm:C},K(t,T)),y)}}),q=U(j),W=q;export{W as V};
