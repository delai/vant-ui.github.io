import{A as Z,y as B,u as A,M as ke,e as m,Q as Y,H as xe,D as R,q as P,J as Re,E as Be,P as Ae,j as Pe,v as $e,B as Oe,O as Ne}from"./vue-libs-12a1683e.js";import{K as se,L as U,M as je,N as ze,c as F,O as Le,b as _e,I as Ee,w as He,o as Me,n as Ve,P as We,h as ae,i as X,A as De,Q as ie,s as oe,u as Ze,R as Fe,e as Ke,p as le}from"./use-translate-113fec30.js";import{u as de}from"./use-id-2cc12458.js";import{u as J}from"./use-expose-89a7ef05.js";import{a as qe,r as Qe}from"./use-route-3942a82f.js";import{B as Ue}from"./index-a6be55ae.js";import{d as q,n as $,m as Xe,c as V,t as D,u as Ye,w as ue}from"./with-install-a70dfb01.js";import{S as Je,a as Ge}from"./index-f6d18d61.js";import{u as pe}from"./use-refs-a2ddf56d.js";import{o as et}from"./on-popup-reopen-eee79bbb.js";import{u as tt,S as nt}from"./index-eb9f216b.js";import{b as at}from"./constant-a81ffd37.js";import{c as it}from"./interceptor-8283b88e.js";function ot(e,o,i){let b,r=0;const a=e.scrollLeft,l=i===0?1:Math.round(i*1e3/16);function s(){se(b)}function c(){e.scrollLeft+=(o-a)/l,++r<l&&(b=U(c))}return c(),s}function lt(e,o,i,b){let r,a=je(e);const l=a<o,s=i===0?1:Math.round(i*1e3/16),c=(o-a)/s;function h(){se(r)}function T(){a+=c,(l&&a>o||!l&&a<o)&&(a=o),ze(e,a),l&&a<o||!l&&a>o?r=U(T):b&&(r=U(b))}return T(),h}function rt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Y(e)}const[ct,re]=F("tabs"),st=Z({name:ct,props:{count:q(Number),inited:Boolean,animated:Boolean,duration:q($),swipeable:Boolean,lazyRender:Boolean,currentIndex:q(Number)},emits:["change"],setup(e,{emit:o,slots:i}){const b=B(),r=s=>o("change",s),a=()=>{var c;const s=(c=i.default)==null?void 0:c.call(i);return e.animated||e.swipeable?m(Je,{ref:b,loop:!1,class:re("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:r},rt(s)?s:{default:()=>[s]}):s},l=s=>{const c=b.value;c&&c.state.active!==s&&c.swipeTo(s,{immediate:!e.inited})};return A(()=>e.currentIndex,l),ke(()=>{l(e.currentIndex)}),J({swipeRef:b}),()=>m("div",{class:re("content",{animated:e.animated||e.swipeable})},[a()])}});function dt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Y(e)}const[fe,W]=F("tabs"),ut={type:Xe("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:V(0),duration:V(.3),animated:Boolean,ellipsis:D,swipeable:Boolean,scrollspy:Boolean,offsetTop:V(0),background:String,lazyRender:D,lineWidth:$,lineHeight:$,beforeChange:Function,swipeThreshold:V(5),titleActiveColor:String,titleInactiveColor:String},be=Symbol(fe),ft=Z({name:fe,props:ut,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:o,slots:i}){let b,r,a,l,s;const c=B(),h=B(),T=B(),I=B(),g=de(),w=Le(c),[j,z]=pe(),{children:u,linkChildren:L}=_e(be),f=xe({inited:!1,position:"",lineStyle:{},currentIndex:-1}),O=R(()=>u.length>+e.swipeThreshold||!e.ellipsis||e.shrink),_=R(()=>({borderColor:e.color,background:e.background})),k=(t,n)=>t.name??n,G=R(()=>{const t=u[f.currentIndex];if(t)return k(t,f.currentIndex)}),K=R(()=>Ee(e.offsetTop)),p=R(()=>e.sticky?K.value+b:0),N=t=>{const n=h.value,d=j.value;if(!O.value||!n||!d||!d[f.currentIndex])return;const y=d[f.currentIndex].$el,v=y.offsetLeft-(n.offsetWidth-y.offsetWidth)/2;l&&l(),l=ot(n,v,t?0:+e.duration)},C=()=>{const t=f.inited;P(()=>{const n=j.value;if(!n||!n[f.currentIndex]||e.type!=="line"||We(c.value))return;const d=n[f.currentIndex].$el,{lineWidth:y,lineHeight:v}=e,S=d.offsetLeft+d.offsetWidth/2,x={width:ae(y),backgroundColor:e.color,transform:`translateX(${S}px) translateX(-50%)`};if(t&&(x.transitionDuration=`${e.duration}s`),X(v)){const M=ae(v);x.height=M,x.borderRadius=M}f.lineStyle=x})},me=t=>{const n=t<f.currentIndex?-1:1;for(;t>=0&&t<u.length;){if(!u[t].disabled)return t;t+=n}},E=(t,n)=>{const d=me(t);if(!X(d))return;const y=u[d],v=k(y,d),S=f.currentIndex!==null;f.currentIndex!==d&&(f.currentIndex=d,n||N(),C()),v!==e.active&&(o("update:active",v),S&&o("change",v,y.title)),a&&!e.scrollspy&&De(Math.ceil(ie(c.value)-K.value))},H=(t,n)=>{const d=u.find((v,S)=>k(v,S)===t),y=d?u.indexOf(d):0;E(y,n)},ee=(t=!1)=>{if(e.scrollspy){const n=u[f.currentIndex].$el;if(n&&w.value){const d=ie(n,w.value)-p.value;r=!0,s&&s(),s=lt(w.value,d,t?0:+e.duration,()=>{r=!1})}}},he=(t,n,d)=>{const{title:y,disabled:v}=u[n],S=k(u[n],n);v||(it(e.beforeChange,{args:[S],done:()=>{E(n),ee()}}),qe(t)),o("clickTab",{name:S,title:y,event:d,disabled:v})},ge=t=>{a=t.isFixed,o("scroll",t)},ye=t=>{P(()=>{H(t),ee(!0)})},Te=()=>{for(let t=0;t<u.length;t++){const{top:n}=oe(u[t].$el);if(n>p.value)return t===0?0:t-1}return u.length-1},Se=()=>{if(e.scrollspy&&!r){const t=Te();E(t)}},we=()=>{if(e.type==="line"&&u.length)return m("div",{class:W("line"),style:f.lineStyle},null)},te=()=>{var v,S,x;const{type:t,border:n,sticky:d}=e,y=[m("div",{ref:d?void 0:T,class:[W("wrap"),{[at]:t==="line"&&n}]},[m("div",{ref:h,role:"tablist",class:W("nav",[t,{shrink:e.shrink,complete:O.value}]),style:_.value,"aria-orientation":"horizontal"},[(v=i["nav-left"])==null?void 0:v.call(i),u.map(M=>M.renderTitle(he)),we(),(S=i["nav-right"])==null?void 0:S.call(i)])]),(x=i["nav-bottom"])==null?void 0:x.call(i)];return d?m("div",{ref:T},[y]):y},ne=()=>{C(),P(()=>{var t,n;N(!0),(n=(t=I.value)==null?void 0:t.swipeRef.value)==null||n.resize()})};A(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],C),A(He,ne),A(()=>e.active,t=>{t!==G.value&&H(t)}),A(()=>u.length,()=>{f.inited&&(H(e.active),C(),P(()=>{N(!0)}))});const Ce=()=>{H(e.active,!0),P(()=>{f.inited=!0,T.value&&(b=oe(T.value).height),N(!0)})},Ie=(t,n)=>o("rendered",t,n);return J({resize:ne,scrollTo:ye}),Re(C),et(C),Me(Ce),tt(c,C),Ve("scroll",Se,{target:w,passive:!0}),L({id:g,props:e,setLine:C,scrollable:O,onRendered:Ie,currentName:G,setTitleRefs:z,scrollIntoView:N}),()=>{let t;return m("div",{ref:c,class:W([e.type])},[e.sticky?m(nt,{container:c.value,offsetTop:K.value,onScroll:ge},dt(t=te())?t:{default:()=>[t]}):te(),m(st,{ref:I,count:u.length,inited:f.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:f.currentIndex,onChange:E},{default:()=>{var n;return[(n=i.default)==null?void 0:n.call(i)]}})])}}}),ve=Symbol(),zt=()=>Be(ve,null);function bt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Y(e)}const[vt,ce]=F("tab"),mt=Z({name:vt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:$,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:D},setup(e,{slots:o}){const i=R(()=>{const r={},{type:a,color:l,disabled:s,isActive:c,activeColor:h,inactiveColor:T}=e;l&&a==="card"&&(r.borderColor=l,s||(c?r.backgroundColor=l:r.color=l));const g=c?h:T;return g&&(r.color=g),r}),b=()=>{const r=m("span",{class:ce("text",{ellipsis:!e.scrollable})},[o.title?o.title():e.title]);return e.dot||X(e.badge)&&e.badge!==""?m(Ue,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},bt(r)?r:{default:()=>[r]}):r};return()=>m("div",{id:e.id,role:"tab",class:[ce([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[b()])}}),[ht,Q]=F("tab"),gt=Ke({},Qe,{dot:Boolean,name:$,badge:$,title:String,disabled:Boolean,titleClass:Ye,titleStyle:[String,Object],showZeroBadge:D}),yt=Z({name:ht,props:gt,setup(e,{slots:o}){const i=de(),b=B(!1),r=Ne(),{parent:a,index:l}=Ze(be);if(!a)return;const s=()=>e.name??l.value,c=()=>{b.value=!0,a.props.lazyRender&&P(()=>{a.onRendered(s(),e.title)})},h=R(()=>{const g=s()===a.currentName.value;return g&&!b.value&&c(),g}),T=g=>m(mt,Oe({key:i,id:`${a.id}-${l.value}`,ref:a.setTitleRefs(l.value),style:e.titleStyle,class:e.titleClass,isActive:h.value,controls:i,scrollable:a.scrollable.value,activeColor:a.props.titleActiveColor,inactiveColor:a.props.titleInactiveColor,onClick:w=>g(r.proxy,l.value,w)},le(a.props,["type","color","shrink"]),le(e,["dot","badge","title","disabled","showZeroBadge"])),{title:o.title}),I=B(!h.value);return A(h,g=>{g?I.value=!1:Fe(()=>{I.value=!0})}),A(()=>e.title,()=>{a.setLine(),a.scrollIntoView()}),Ae(ve,h),J({id:i,renderTitle:T}),()=>{var _;const g=`${a.id}-${l.value}`,{animated:w,swipeable:j,scrollspy:z,lazyRender:u}=a.props;if(!o.default&&!w)return;const L=z||h.value;if(w||j)return m(Ge,{id:i,role:"tabpanel",class:Q("panel-wrapper",{inactive:I.value}),tabindex:h.value?0:-1,"aria-hidden":!h.value,"aria-labelledby":g},{default:()=>{var k;return[m("div",{class:Q("panel")},[(k=o.default)==null?void 0:k.call(o)])]}});const O=b.value||z||!u?(_=o.default)==null?void 0:_.call(o):null;return Pe(m("div",{id:i,role:"tabpanel",class:Q("panel"),tabindex:L?0:-1,"aria-labelledby":g},[O]),[[$e,L]])}}}),Tt=ue(yt),Lt=Tt,St=ue(ft),_t=St;export{St as T,Lt as V,Tt as a,_t as b,zt as u};
