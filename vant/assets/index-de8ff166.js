import{V as w,b as Y}from"./index-975f7530.js";import{V as z}from"./index-c6c98967.js";import{V as I}from"./index-ccf0808b.js";import{h as S,m as L,a0 as U,c as R,a as E}from"./use-translate-ad5eefa4.js";import{u as $}from"./use-lock-scroll-dce811cc.js";import{u as G}from"./use-touch-06ff9235.js";import{u as W}from"./use-sync-prop-ref-011d5386.js";import{A as B,y as b,D as y,u as j,e as a,o as T,c as q,w as i,C as e,a as J,F as K,b as Q,d as p,t as D}from"./vue-libs-6a67f9c6.js";import{c as V}from"./closest-17b2cc6c.js";import{c as A,b as X,t as k,w as Z}from"./with-install-0d9206aa.js";import"./use-id-5464e261.js";import"./use-expose-c87283be.js";import"./use-route-ea8124d0.js";import"./index-4437616e.js";import"./index-a14bebed.js";import"./on-popup-reopen-2b57f4ff.js";import"./use-refs-4e2d69f7.js";import"./index-a81fbffb.js";import"./constant-ee6e27d7.js";import"./interceptor-e18d38f8.js";import"./index-1c02023b.js";const{height:tt}=U(),et={height:A(0),anchors:X(),duration:A(.2),contentDraggable:k,safeAreaInsetBottom:k},[at,_]=R("floating-panel"),H=.2,nt=B({name:at,props:et,emits:["heightChange","update:height"],setup(n,{emit:g,slots:r}){const h=b(),l=b(),o=W(()=>+n.height,t=>g("update:height",t)),s=y(()=>({min:n.anchors[0]??100,max:n.anchors[n.anchors.length-1]??Math.round(tt.value*.6)})),u=y(()=>n.anchors.length>=2?n.anchors:[s.value.min,s.value.max]),x=b(!1),F=y(()=>({height:S(s.value.max),transform:`translateY(calc(100% + ${S(-o.value)}))`,transition:x.value?"none":`transform ${n.duration}s`})),M=t=>{const c=Math.abs(t),{min:d,max:m}=s.value;return c>m?-(m+(c-m)*H):c<d?-(d-(d-c)*H):t};let f;const v=G(),N=t=>{v.start(t),x.value=!0,f=-o.value},O=t=>{var m;v.move(t);const c=t.target;if(l.value===c||(m=l.value)!=null&&m.contains(c)){if(!n.contentDraggable)return;if(-f<s.value.max)t.cancelable&&t.preventDefault(),t.stopPropagation();else if(!(l.value.scrollTop<=0&&v.deltaY.value>0))return}const d=v.deltaY.value+f;o.value=-M(d)},C=()=>{x.value=!1,o.value=V(u.value,o.value),o.value!==-f&&g("heightChange",{height:o.value})};return j(s,()=>{o.value=V(u.value,o.value)},{immediate:!0}),$(h,()=>!0),L("touchmove",O,{target:h}),()=>{var t;return a("div",{class:[_(),{"van-safe-area-bottom":n.safeAreaInsetBottom}],ref:h,style:F.value,onTouchstartPassive:N,onTouchend:C,onTouchcancel:C},[a("div",{class:_("header")},[a("div",{class:_("header-bar")},null)]),a("div",{class:_("content"),ref:l},[(t=r.default)==null?void 0:t.call(r)])])}}}),ot=Z(nt),P=ot,rt={style:{"text-align":"center",padding:"15px"}},st={style:{"text-align":"center",padding:"15px"}},Vt=B({__name:"index",setup(n){const{height:g}=U(),r=E({"zh-CN":{customAnchors:"自定义锚点",headDragOnly:"仅头部拖拽",panelShowHeight:"面板显示高度",contentUnDrag:"内容不可拖拽"},"en-US":{customAnchors:"Custom Anchors",headDragOnly:"Head Drag Only",panelShowHeight:"Panel Show Height",contentUnDrag:"Content cannot be dragged"}}),h=[100,Math.round(.4*g.value),Math.round(.7*g.value)],l=b(h[0]);return(o,s)=>(T(),q(e(Y),null,{default:i(()=>[a(e(w),{title:e(r)("basicUsage")},{default:i(()=>[a(e(P),null,{default:i(()=>[a(e(I),null,{default:i(()=>[(T(),J(K,null,Q(26,u=>a(e(z),{key:u,title:String.fromCharCode(u+64),size:"large"},null,8,["title"])),64))]),_:1})]),_:1})]),_:1},8,["title"]),a(e(w),{title:e(r)("customAnchors")},{default:i(()=>[a(e(P),{height:l.value,"onUpdate:height":s[0]||(s[0]=u=>l.value=u),anchors:h},{default:i(()=>[p("div",rt,[p("p",null,D(e(r)("panelShowHeight"))+" "+D(l.value.toFixed(0))+" px",1)])]),_:1},8,["height"])]),_:1},8,["title"]),a(e(w),{title:e(r)("headDragOnly")},{default:i(()=>[a(e(P),{"content-draggable":!1},{default:i(()=>[p("div",st,[p("p",null,D(e(r)("contentUnDrag")),1)])]),_:1})]),_:1},8,["title"])]),_:1}))}});export{Vt as default};
