import{A as N,y as S,H as M,u as P,j as q,v as A,e as t,r as F,o as U,a as $,w as s,C as e,g as x,t as w,F as j}from"./vue-libs-6a67f9c6.js";import{o as z,n as H,c as O,s as k,R as C,L as X,i as G,a as J}from"./use-translate-982dff2e.js";import{u as K}from"./use-expose-1bc17a0b.js";import{o as Q}from"./on-popup-reopen-2b57f4ff.js";import{I}from"./index-e4434a2e.js";import{c as R,w as Y}from"./with-install-3eab31d5.js";import{V as Z,b as _}from"./index-788bb0c5.js";import"./index-65b13139.js";import"./use-touch-87b155f0.js";const[ee,m]=O("notice-bar"),te={text:String,mode:String,color:String,delay:R(1),speed:R(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}},oe=N({name:ee,props:te,emits:["close","replay"],setup(l,{emit:o,slots:i}){let u=0,a=0,y;const h=S(),b=S(),n=M({show:!0,offset:0,duration:0}),T=()=>{if(i["left-icon"])return i["left-icon"]();if(l.leftIcon)return t(I,{class:m("left-icon"),name:l.leftIcon},null)},B=()=>{if(l.mode==="closeable")return"cross";if(l.mode==="link")return"arrow"},V=r=>{l.mode==="closeable"&&(n.show=!1,o("close",r))},W=()=>{if(i["right-icon"])return i["right-icon"]();const r=B();if(r)return t(I,{name:r,class:m("right-icon"),onClick:V},null)},D=()=>{n.offset=u,n.duration=0,X(()=>{C(()=>{n.offset=-a,n.duration=(a+u)/+l.speed,o("replay")})})},E=()=>{const r=l.scrollable===!1&&!l.wrapable,d={transform:n.offset?`translateX(${n.offset}px)`:"",transitionDuration:`${n.duration}s`};return t("div",{ref:h,role:"marquee",class:m("wrap")},[t("div",{ref:b,style:d,class:[m("content"),{"van-ellipsis":r}],onTransitionend:D},[i.default?i.default():l.text])])},f=()=>{const{delay:r,speed:d,scrollable:p}=l,L=G(r)?+r*1e3:0;u=0,a=0,n.offset=0,n.duration=0,clearTimeout(y),y=setTimeout(()=>{if(!h.value||!b.value||p===!1)return;const g=k(h).width,v=k(b).width;(p||v>g)&&C(()=>{u=g,a=v,n.offset=-a,n.duration=a/+d})},L)};return Q(f),z(f),H("pageshow",f),K({reset:f}),P(()=>[l.text,l.scrollable],f),()=>{const{color:r,wrapable:d,background:p}=l;return q(t("div",{role:"alert",class:m({wrapable:d}),style:{color:r,background:p}},[T(),E(),W()]),[[A,n.show]])}}}),le=Y(oe),c=le,me=N({__name:"index",setup(l){const o=J({"zh-CN":{mode:"通知栏模式",text1:"无论我们能活多久，我们能够享受的只有无法分割的此刻，此外别无其他。",text2:"不会回头的东西有四件：说出口的话、离弦的箭、逝去的生活和失去的机会。",haiku:"米袋虽空——樱花开哉！",poetry1:"明月直入，无心可猜。",poetry2:"仙人抚我顶，结发受长生。",poetry3:"今人不见古时月，今月曾经照古人。",wrapable:"多行展示",scrollable:"滚动播放",customStyle:"自定义样式",verticalScroll:"垂直滚动"},"en-US":{mode:"Mode",text1:"Technology is the common soul of the people who developed it.",text2:"Technology is the common soul of the people who developed it.",haiku:"Short Content",poetry1:"Content 1",poetry2:"Content 2",poetry3:"Content 3",wrapable:"Wrapable",customStyle:"Custom Style",scrollable:"Scrollable",verticalScroll:"Vertical Scroll"}});return(i,u)=>{const a=F("demo-block");return U(),$(j,null,[t(a,{title:e(o)("basicUsage")},{default:s(()=>[t(e(c),{text:e(o)("text1"),scrollable:"","left-icon":"volume-o"},null,8,["text"])]),_:1},8,["title"]),t(a,{title:e(o)("scrollable")},{default:s(()=>[t(e(c),{scrollable:"",text:e(o)("haiku")},null,8,["text"]),t(e(c),{scrollable:!1,text:e(o)("text2")},null,8,["text"])]),_:1},8,["title"]),t(a,{title:e(o)("wrapable")},{default:s(()=>[t(e(c),{wrapable:"",scrollable:!1,text:e(o)("text2")},null,8,["text"])]),_:1},8,["title"]),t(a,{title:e(o)("mode")},{default:s(()=>[t(e(c),{mode:"closeable",text:e(o)("haiku")},null,8,["text"]),t(e(c),{mode:"link",text:e(o)("haiku")},null,8,["text"])]),_:1},8,["title"]),t(a,{title:e(o)("customStyle")},{default:s(()=>[t(e(c),{text:e(o)("haiku"),color:"#1989fa",background:"#ecf9ff","left-icon":"info-o"},null,8,["text"])]),_:1},8,["title"]),t(a,{title:e(o)("verticalScroll")},{default:s(()=>[t(e(c),{"left-icon":"volume-o",scrollable:!1},{default:s(()=>[t(e(Z),{vertical:"",class:"notice-swipe",autoplay:3e3,touchable:!1,"show-indicators":!1},{default:s(()=>[t(e(_),null,{default:s(()=>[x(w(e(o)("poetry1")),1)]),_:1}),t(e(_),null,{default:s(()=>[x(w(e(o)("poetry2")),1)]),_:1}),t(e(_),null,{default:s(()=>[x(w(e(o)("poetry3")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])],64)}}});export{me as default};
