/*! For license information please see 2172.947480b3.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([["2172"],{92086:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var r=a("93050");a.es(r,t),a("38511");var l=r.default},93050:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return r.default}});var r=a("99863");a.es(r,t)},99863:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}}),a("76959"),a("11057"),a("64667");var r=a("69298"),l=a("31355"),i=a("54991"),o=a("70656"),n=a("82626"),u={class:"preview-cover van-ellipsis"},d=(0,r.defineComponent)({__name:"index",setup(e){var t=(0,o.useTranslate)({"zh-CN":{status:"\u4E0A\u4F20\u72B6\u6001",failed:"\u4E0A\u4F20\u5931\u8D25",upload:"\u4E0A\u4F20\u6587\u4EF6",preview:"\u6587\u4EF6\u9884\u89C8",maxSize:"\u9650\u5236\u4E0A\u4F20\u5927\u5C0F",disabled:"\u7981\u7528\u6587\u4EF6\u4E0A\u4F20",maxCount:"\u9650\u5236\u4E0A\u4F20\u6570\u91CF",uploading:"\u4E0A\u4F20\u4E2D...",imageName:"\u56FE\u7247\u540D\u79F0",beforeRead:"\u4E0A\u4F20\u524D\u7F6E\u5904\u7406",overSizeTip:"\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 500kb",invalidType:"\u8BF7\u4E0A\u4F20 jpg \u683C\u5F0F\u56FE\u7247",customUpload:"\u81EA\u5B9A\u4E49\u4E0A\u4F20\u6837\u5F0F",previewSize:"\u81EA\u5B9A\u4E49\u9884\u89C8\u5927\u5C0F",previewCover:"\u81EA\u5B9A\u4E49\u9884\u89C8\u6837\u5F0F",deleteMessage:"\u5220\u9664\u524D\u7F6E\u5904\u7406",customPreviewImage:"\u81EA\u5B9A\u4E49\u5355\u4E2A\u56FE\u7247\u9884\u89C8",reupload:"\u5F00\u542F\u8986\u76D6\u4E0A\u4F20"},"en-US":{status:"Upload Status",failed:"Failed",upload:"Upload File",preview:"Preview File",maxSize:"Max Size",disabled:"Disable Uploader",maxCount:"Max Count",uploading:"Uploading...",imageName:"Image Name",beforeRead:"Before Read",overSizeTip:"File size cannot exceed 500kb",invalidType:"Please upload an image in jpg format",customUpload:"Custom Upload Area",previewSize:"Preview Size",previewCover:"Preview Cover",deleteMessage:"Before Delete",customPreviewImage:"Custom single preview image",reupload:"Enable Reupload"}}),a=(0,r.ref)([{url:(0,o.cdnURL)("leaf.jpeg")},{url:(0,o.cdnURL)("tree.jpeg")}]),d=(0,r.ref)([{url:(0,o.cdnURL)("sand.jpeg")}]),c=(0,r.ref)([]),s=(0,r.ref)([{url:(0,o.cdnURL)("sand.jpeg")}]),v=(0,r.ref)([{url:(0,o.cdnURL)("sand.jpeg"),deletable:!0,beforeDelete:()=>{(0,n.showToast)(t("deleteMessage"))}},{url:(0,o.cdnURL)("tree.jpeg"),imageFit:"contain"}]),p=(0,r.ref)([{url:(0,o.cdnURL)("leaf.jpeg"),status:"uploading",message:t("uploading")},{url:(0,o.cdnURL)("tree.jpeg"),status:"failed",message:t("failed")}]),f=(0,r.ref)([{url:(0,o.cdnURL)("leaf.jpeg"),file:{name:t("imageName")}}]),m=(0,r.ref)([{url:(0,o.cdnURL)("leaf.jpeg")}]),g=e=>!!Array.isArray(e)||"image/jpeg"===e.type||((0,n.showToast)(t("invalidType")),!1),h=(e,t)=>{console.log(e,t)},w=e=>{e.status="uploading",e.message=t("uploading"),setTimeout(()=>{e.status="failed",e.message=t("failed")},1e3)},V=e=>{Array.isArray(e)?e.forEach(w):w(e)},b=(e,a)=>{console.log(e,a),(0,n.showToast)(t("overSizeTip"))},N=(0,r.ref)([{url:(0,o.cdnURL)("leaf.jpeg")}]);return(e,o)=>{var n=(0,r.resolveComponent)("demo-block");return(0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.createVNode)(n,{title:(0,r.unref)(t)("basicUsage")},{default:(0,r.withCtx)(()=>[(0,r.createVNode)((0,r.unref)(l.default),{"after-read":h})]),_:1},8,["title"]),(0,r.createVNode)(n,{title:(0,r.unref)(t)("preview")},{default:(0,r.withCtx)(()=>[(0,r.createVNode)((0,r.unref)(l.default),{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e),multiple:"",accept:"*"},null,8,["modelValue"])]),_:1},8,["title"]),(0,r.createVNode)(n,{title:(0,r.unref)(t)("status")},{default:(0,r.withCtx)(()=>[(0,r.createVNode)((0,r.unref)(l.default),{modelValue:p.value,"onUpdate:modelValue":o[1]||(o[1]=e=>p.value=e),"after-read":V},null,8,["modelValue"])]),_:1},8,["title"]),(0,r.createVNode)(n,{title:(0,r.unref)(t)("maxCount")},{default:(0,r.withCtx)(()=>[(0,r.createVNode)((0,r.unref)(l.default),{modelValue:d.value,"onUpdate:modelValue":o[2]||(o[2]=e=>d.value=e),multiple:"","max-count":2},null,8,["modelValue"])]),_:1},8,["title"]),(0,r.createVNode)(n,{title:(0,r.unref)(t)("maxSize")},{default:(0,r.withCtx)(()=>[(0,r.createVNode)((0,r.unref)(l.default),{modelValue:s.value,"onUpdate:modelValue":o[3]||(o[3]=e=>s.value=e),multiple:"","max-size":512e3,onOversize:b},null,8,["modelValue"])]),_:1},8,["title"]),(0,r.createVNode)(n,{title:(0,r.unref)(t)("customUpload")},{default:(0,r.withCtx)(()=>[(0,r.createVNode)((0,r.unref)(l.default),null,{default:(0,r.withCtx)(()=>[(0,r.createVNode)((0,r.unref)(i.default),{type:"primary",icon:"plus"},{default:(0,r.withCtx)(()=>[(0,r.createTextVNode)((0,r.toDisplayString)((0,r.unref)(t)("upload")),1)]),_:1})]),_:1})]),_:1},8,["title"]),(0,r.createVNode)(n,{title:(0,r.unref)(t)("previewCover")},{default:(0,r.withCtx)(()=>[(0,r.createVNode)((0,r.unref)(l.default),{modelValue:f.value,"onUpdate:modelValue":o[4]||(o[4]=e=>f.value=e)},{"preview-cover":(0,r.withCtx)(e=>{var{file:t}=e;return[(0,r.createElementVNode)("div",u,(0,r.toDisplayString)(t.name),1)]}),_:1},8,["modelValue"])]),_:1},8,["title"]),(0,r.createVNode)(n,{title:(0,r.unref)(t)("previewSize")},{default:(0,r.withCtx)(()=>[(0,r.createVNode)((0,r.unref)(l.default),{modelValue:m.value,"onUpdate:modelValue":o[5]||(o[5]=e=>m.value=e),"preview-size":"60"},null,8,["modelValue"])]),_:1},8,["title"]),(0,r.createVNode)(n,{title:(0,r.unref)(t)("beforeRead")},{default:(0,r.withCtx)(()=>[(0,r.createVNode)((0,r.unref)(l.default),{modelValue:c.value,"onUpdate:modelValue":o[6]||(o[6]=e=>c.value=e),"before-read":g},null,8,["modelValue"])]),_:1},8,["title"]),(0,r.createVNode)(n,{title:(0,r.unref)(t)("disabled")},{default:(0,r.withCtx)(()=>[(0,r.createVNode)((0,r.unref)(l.default),{"after-read":h,disabled:""})]),_:1},8,["title"]),(0,r.createVNode)(n,{title:(0,r.unref)(t)("customPreviewImage")},{default:(0,r.withCtx)(()=>[(0,r.createVNode)((0,r.unref)(l.default),{modelValue:v.value,"onUpdate:modelValue":o[7]||(o[7]=e=>v.value=e),multiple:"",accept:"*",deletable:!1},null,8,["modelValue"])]),_:1},8,["title"]),(0,r.createVNode)(n,{title:(0,r.unref)(t)("reupload")},{default:(0,r.withCtx)(()=>[(0,r.createVNode)((0,r.unref)(l.default),{modelValue:N.value,"onUpdate:modelValue":o[8]||(o[8]=e=>N.value=e),reupload:"","max-count":"2"},null,8,["modelValue"])]),_:1},8,["title"])],64)}}})},54991:function(e,t,a){"use strict";a.r(t),a.d(t,{Button:function(){return i},default:function(){return o}});var r=a("59633"),l=a("34396"),i=(0,r.withInstall)(l.default),o=i},3578:function(e,t,a){"use strict";a.r(t),a.d(t,{route:function(){return i},routeProps:function(){return l},useRoute:function(){return o}}),a("56821"),a("5780");var r=a("69298"),l={to:[String,Object],url:String,replace:Boolean};function i(e){var{to:t,url:a,replace:r,$router:l}=e;t&&l?l[r?"replace":"push"](t):a&&(r?location.replace(a):location.href=a)}function o(){var e=(0,r.getCurrentInstance)().proxy;return()=>i(e)}},4341:function(e,t,a){"use strict";a.r(t),a.d(t,{Loading:function(){return i},default:function(){return o}});var r=a("59633"),l=a("86512"),i=(0,r.withInstall)(l.default),o=i},7394:function(e,t,a){"use strict";a.r(t),a.d(t,{SwipeItem:function(){return i},default:function(){return o}});var r=a("59633"),l=a("65982"),i=(0,r.withInstall)(l.default),o=i},58847:function(e,t,a){"use strict";a.r(t),a.d(t,{Swipe:function(){return i},default:function(){return o}});var r=a("59633"),l=a("35678"),i=(0,r.withInstall)(l.default),o=i},31355:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var r=a("59633"),l=a("20425"),i=(0,r.withInstall)(l.default)},5187:function(e,t,a){"use strict";a.r(t),a.d(t,{bem:function(){return i},filterFiles:function(){return d},isImageFile:function(){return v},isOversize:function(){return u},name:function(){return l},readFileContent:function(){return n},t:function(){return o}}),a("74366"),a("52400"),a("3712"),a("5574"),a("84691"),a("64667"),a("76959"),a("11057"),a("14078"),a("5780");var r=a("59633"),[l,i,o]=(0,r.createNamespace)("uploader");function n(e,t){return new Promise(a=>{if("file"===t){a();return}var r=new FileReader;r.onload=e=>{a(e.target.result)},"dataUrl"===t?r.readAsDataURL(e):"text"===t&&r.readAsText(e)})}function u(e,t){return(0,r.toArray)(e).some(e=>{if(e.file)return(0,r.isFunction)(t)?t(e.file):e.file.size>+t;return!1})}function d(e,t){var a=[],r=[];return e.forEach(e=>{u(e,t)?r.push(e):a.push(e)}),{valid:a,invalid:r}}var c=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,s=e=>c.test(e);function v(e){return!!e.isImage||(e.file&&e.file.type?0===e.file.type.indexOf("image"):e.url?s(e.url):"string"==typeof e.content&&0===e.content.indexOf("data:image"))}},34396:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return s}}),a("74366"),a("52400"),a("20964");var r=a("69298"),l=a("59633"),i=a("3578"),o=a("57739"),n=a("4341"),[u,d]=(0,l.createNamespace)("button"),c=(0,l.extend)({},i.routeProps,{tag:(0,l.makeStringProp)("button"),text:String,icon:String,type:(0,l.makeStringProp)("default"),size:(0,l.makeStringProp)("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:(0,l.makeStringProp)("button"),loadingSize:l.numericProp,loadingText:String,loadingType:String,iconPosition:(0,l.makeStringProp)("left")}),s=(0,r.defineComponent)({name:u,props:c,emits:["click"],setup(e,t){var{emit:a,slots:u}=t,c=(0,i.useRoute)(),s=()=>u.loading?u.loading():(0,r.createVNode)(n.Loading,{size:e.loadingSize,type:e.loadingType,class:d("loading")},null),v=()=>e.loading?s():u.icon?(0,r.createVNode)("div",{class:d("icon")},[u.icon()]):e.icon?(0,r.createVNode)(o.Icon,{name:e.icon,class:d("icon"),classPrefix:e.iconPrefix},null):void 0,p=()=>{var t;if(t=e.loading?e.loadingText:u.default?u.default():e.text)return(0,r.createVNode)("span",{class:d("text")},[t])},f=()=>{var{color:t,plain:a}=e;if(t){var r={color:a?t:"white"};return!a&&(r.background=t),t.includes("gradient")?r.border=0:r.borderColor=t,r}},m=t=>{e.loading?(0,l.preventDefault)(t):!e.disabled&&(a("click",t),c())};return()=>{var{tag:t,type:a,size:i,block:o,round:n,plain:u,square:c,loading:s,disabled:g,hairline:h,nativeType:w,iconPosition:V}=e,b=[d([a,i,{plain:u,block:o,round:n,square:c,loading:s,disabled:g,hairline:h}]),{[l.BORDER_SURROUND]:h}];return(0,r.createVNode)(t,{type:w,class:b,style:f(),disabled:g,onClick:m},{default:()=>[(0,r.createVNode)("div",{class:d("content")},["left"===V&&v(),p(),"right"===V&&v()])]})}}})},86512:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}}),a("74366"),a("52400"),a("6868"),a("4331");var r=a("69298"),l=a("59633"),[i,o]=(0,l.createNamespace)("loading"),n=Array(12).fill(null).map((e,t)=>(0,r.createVNode)("i",{class:o("line",String(t+1))},null)),u=(0,r.createVNode)("svg",{class:o("circular"),viewBox:"25 25 50 50"},[(0,r.createVNode)("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),d={size:l.numericProp,type:(0,l.makeStringProp)("circular"),color:String,vertical:Boolean,textSize:l.numericProp,textColor:String},c=(0,r.defineComponent)({name:i,props:d,setup(e,t){var{slots:a}=t,i=(0,r.computed)(()=>(0,l.extend)({color:e.color},(0,l.getSizeStyle)(e.size))),d=()=>{var t="spinner"===e.type?n:u;return(0,r.createVNode)("span",{class:o("spinner",e.type),style:i.value},[a.icon?a.icon():t])},c=()=>{if(a.default){var t;return(0,r.createVNode)("span",{class:o("text"),style:{fontSize:(0,l.addUnit)(e.textSize),color:null!==(t=e.textColor)&&void 0!==t?t:e.color}},[a.default()])}};return()=>{var{type:t,vertical:a}=e;return(0,r.createVNode)("div",{class:o([t,{vertical:a}]),"aria-live":"polite","aria-busy":!0},[d(),c()])}}})},65982:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}}),a("74366"),a("52400");var r=a("69298"),l=a("59633"),i=a("35678"),o=a("22300"),n=a("29067"),[u,d]=(0,l.createNamespace)("swipe-item"),c=(0,r.defineComponent)({name:u,setup(e,t){var a,{slots:l}=t,u=(0,r.reactive)({offset:0,inited:!1,mounted:!1}),{parent:c,index:s}=(0,o.useParent)(i.SWIPE_KEY);if(c){var v=(0,r.computed)(()=>{var e={},{vertical:t}=c.props;return c.size.value&&(e[t?"height":"width"]="".concat(c.size.value,"px")),u.offset&&(e.transform="translate".concat(t?"Y":"X","(").concat(u.offset,"px)")),e}),p=(0,r.computed)(()=>{var{loop:e,lazyRender:t}=c.props;if(!t||a)return!0;if(!u.mounted)return!1;var r=c.activeIndicator.value,l=c.count.value-1;return a=s.value===r||s.value===(0===r&&e?l:r-1)||s.value===(r===l&&e?0:r+1)});return(0,r.onMounted)(()=>{(0,r.nextTick)(()=>{u.mounted=!0})}),(0,n.useExpose)({setOffset:e=>{u.offset=e}}),()=>{var e;return(0,r.createVNode)("div",{class:d(),style:v.value},[p.value?null===(e=l.default)||void 0===e?void 0:e.call(l):null])}}}})},35678:function(e,t,a){"use strict";a.r(t),a.d(t,{SWIPE_KEY:function(){return v},default:function(){return p}}),a("74366"),a("52400"),a("95818"),a("76959"),a("11057"),a("64667"),a("6868"),a("4331");var r=a("69298"),l=a("59633"),i=a("22300"),o=a("10976"),n=a("29067"),u=a("26270"),[d,c]=(0,l.createNamespace)("swipe"),s={loop:l.truthProp,width:l.numericProp,height:l.numericProp,vertical:Boolean,autoplay:(0,l.makeNumericProp)(0),duration:(0,l.makeNumericProp)(500),touchable:l.truthProp,lazyRender:Boolean,initialSwipe:(0,l.makeNumericProp)(0),indicatorColor:String,showIndicators:l.truthProp,stopPropagation:l.truthProp},v=Symbol(d),p=(0,r.defineComponent)({name:d,props:s,emits:["change","dragStart","dragEnd"],setup(e,t){var a,d,{emit:s,slots:p}=t,f=(0,r.ref)(),m=(0,r.ref)(),g=(0,r.reactive)({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),h=!1,w=(0,o.useTouch)(),{children:V,linkChildren:b}=(0,i.useChildren)(v),N=(0,r.computed)(()=>V.length),x=(0,r.computed)(()=>g[e.vertical?"height":"width"]),S=(0,r.computed)(()=>e.vertical?w.deltaY.value:w.deltaX.value),y=(0,r.computed)(()=>g.rect?(e.vertical?g.rect.height:g.rect.width)-x.value*N.value:0),P=(0,r.computed)(()=>x.value?Math.ceil(Math.abs(y.value)/x.value):N.value),C=(0,r.computed)(()=>N.value*x.value),k=(0,r.computed)(()=>(g.active+N.value)%N.value),U=(0,r.computed)(()=>{var t=e.vertical?"vertical":"horizontal";return w.direction.value===t}),z=(0,r.computed)(()=>{var t={transitionDuration:"".concat(g.swiping?0:e.duration,"ms"),transform:"translate".concat(e.vertical?"Y":"X","(").concat(+g.offset.toFixed(2),"px)")};if(x.value){var a=e.vertical?"height":"width",r=e.vertical?"width":"height";t[a]="".concat(C.value,"px"),t[r]=e[r]?"".concat(e[r],"px"):""}return t}),R=t=>{var{active:a}=g;if(t)return e.loop?(0,l.clamp)(a+t,-1,N.value):(0,l.clamp)(a+t,0,P.value);return a},I=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t*x.value;!e.loop&&(r=Math.min(r,-y.value));var i=a-r;return!e.loop&&(i=(0,l.clamp)(i,y.value,0)),i},T=t=>{var{pace:a=0,offset:r=0,emitChange:l}=t;if(!(N.value<=1)){var{active:i}=g,o=R(a),n=I(o,r);if(e.loop){if(V[0]&&n!==y.value){var u=n<y.value;V[0].setOffset(u?C.value:0)}if(V[N.value-1]&&0!==n){var d=n>0;V[N.value-1].setOffset(d?-C.value:0)}}g.active=o,g.offset=n,l&&o!==i&&s("change",k.value)}},B=()=>{g.swiping=!0,g.active<=-1?T({pace:N.value}):g.active>=N.value&&T({pace:-N.value})},j=()=>{B(),w.reset(),(0,i.doubleRaf)(()=>{g.swiping=!1,T({pace:1,emitChange:!0})})},F=()=>clearTimeout(a),L=()=>{F(),+e.autoplay>0&&N.value>1&&(a=setTimeout(()=>{j(),L()},+e.autoplay))},A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+e.initialSwipe;if(f.value){var a=()=>{if(!(0,l.isHidden)(f)){var a,r,i={width:f.value.offsetWidth,height:f.value.offsetHeight};g.rect=i,g.width=+(null!==(a=e.width)&&void 0!==a?a:i.width),g.height=+(null!==(r=e.height)&&void 0!==r?r:i.height)}N.value&&-1===(t=Math.min(N.value-1,t))&&(t=N.value-1),g.active=t,g.swiping=!0,g.offset=I(t),V.forEach(e=>{e.setOffset(0)}),L()};(0,l.isHidden)(f)?(0,r.nextTick)().then(a):a()}},D=()=>A(g.active),O=t=>{e.touchable&&!(t.touches.length>1)&&(w.start(t),h=!1,d=Date.now(),F(),B())},_=()=>{if(e.touchable&&g.swiping){var t=Date.now()-d;if((Math.abs(S.value/t)>.25||Math.abs(S.value)>x.value/2)&&U.value){var a=e.vertical?w.offsetY.value:w.offsetX.value,r=0;T({pace:r=e.loop?a>0?S.value>0?-1:1:0:-Math[S.value>0?"ceil":"floor"](S.value/x.value),emitChange:!0})}else S.value&&T({pace:0});h=!1,g.swiping=!1,s("dragEnd",{index:k.value}),L()}},E=(t,a)=>{var l=a===k.value,i=l?{backgroundColor:e.indicatorColor}:void 0;return(0,r.createVNode)("i",{style:i,class:c("indicator",{active:l})},null)},M=()=>p.indicator?p.indicator({active:k.value,total:N.value}):e.showIndicators&&N.value>1?(0,r.createVNode)("div",{class:c("indicators",{vertical:e.vertical})},[Array(N.value).fill("").map(E)]):void 0;return(0,n.useExpose)({prev:()=>{B(),w.reset(),(0,i.doubleRaf)(()=>{g.swiping=!1,T({pace:-1,emitChange:!0})})},next:j,state:g,resize:D,swipeTo:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};B(),w.reset(),(0,i.doubleRaf)(()=>{var r;r=e.loop&&t===N.value?0===g.active?0:t:t%N.value,a.immediate?(0,i.doubleRaf)(()=>{g.swiping=!1}):g.swiping=!1,T({pace:r-g.active,emitChange:!0})})}}),b({size:x,props:e,count:N,activeIndicator:k}),(0,r.watch)(()=>e.initialSwipe,e=>A(+e)),(0,r.watch)(N,()=>A(g.active)),(0,r.watch)(()=>e.autoplay,L),(0,r.watch)([l.windowWidth,l.windowHeight,()=>e.width,()=>e.height],D),(0,r.watch)((0,i.usePageVisibility)(),e=>{"visible"===e?L():F()}),(0,r.onMounted)(A),(0,r.onActivated)(()=>A(g.active)),(0,u.onPopupReopen)(()=>A(g.active)),(0,r.onDeactivated)(F),(0,r.onBeforeUnmount)(F),(0,i.useEventListener)("touchmove",t=>{e.touchable&&g.swiping&&(w.move(t),U.value&&!(!e.loop&&(0===g.active&&S.value>0||g.active===N.value-1&&S.value<0))&&((0,l.preventDefault)(t,e.stopPropagation),T({offset:S.value}),!h&&(s("dragStart",{index:k.value}),h=!0)))},{target:m}),()=>{var t;return(0,r.createVNode)("div",{ref:f,class:c()},[(0,r.createVNode)("div",{ref:m,style:z.value,class:c("track",{vertical:e.vertical}),onTouchstartPassive:O,onTouchend:_,onTouchcancel:_},[null===(t=p.default)||void 0===t?void 0:t.call(p)]),M()])}}})},20425:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}}),a("74366"),a("52400"),a("3712"),a("6868"),a("4331"),a("17905"),a("49128"),a("72104"),a("1676"),a("50882"),a("59186"),a("78394"),a("64667"),a("14078"),a("76959"),a("11057");var r=a("69298"),l=a("59633"),i=a("5187"),o=a("22300"),n=a("29067"),u=a("57739"),d=a("17650"),c=a("96967"),s={name:(0,l.makeNumericProp)(""),accept:(0,l.makeStringProp)("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:(0,l.makeNumericProp)(1/0),imageFit:(0,l.makeStringProp)("cover"),resultType:(0,l.makeStringProp)("dataUrl"),uploadIcon:(0,l.makeStringProp)("photograph"),uploadText:String,deletable:l.truthProp,reupload:Boolean,afterRead:Function,showUpload:l.truthProp,modelValue:(0,l.makeArrayProp)(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:l.truthProp,previewOptions:Object,previewFullImage:l.truthProp,maxSize:{type:[Number,String,Function],default:1/0}},v=(0,r.defineComponent)({name:i.name,props:s,emits:["delete","oversize","clickUpload","closePreview","clickPreview","clickReupload","update:modelValue"],setup(e,t){var a,{emit:s,slots:v}=t,p=(0,r.ref)(),f=[],m=(0,r.ref)(-1),g=(0,r.ref)(!1),h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.modelValue.length;return{name:e.name,index:t}},w=()=>{p.value&&(p.value.value="")},V=t=>{if(w(),(0,i.isOversize)(t,e.maxSize)){if(Array.isArray(t)){var a=(0,i.filterFiles)(t,e.maxSize);if(t=a.valid,s("oversize",a.invalid,h()),!t.length)return}else{s("oversize",t,h());return}}if(t=(0,r.reactive)(t),m.value>-1){var o=[...e.modelValue];o.splice(m.value,1,t),s("update:modelValue",o),m.value=-1}else s("update:modelValue",[...e.modelValue,...(0,l.toArray)(t)]);e.afterRead&&e.afterRead(t,h())},b=t=>{var{maxCount:a,modelValue:r,resultType:l}=e;if(Array.isArray(t)){var o=+a-r.length;t.length>o&&(t=t.slice(0,o)),Promise.all(t.map(e=>(0,i.readFileContent)(e,l))).then(e=>{V(t.map((t,a)=>{var r={file:t,status:"",message:"",objectUrl:URL.createObjectURL(t)};return e[a]&&(r.content=e[a]),r}))})}else(0,i.readFileContent)(t,l).then(e=>{var a={file:t,status:"",message:"",objectUrl:URL.createObjectURL(t)};e&&(a.content=e),V(a)})},N=t=>{var{files:a}=t.target;if(!e.disabled&&a&&a.length){var r=1===a.length?a[0]:[].slice.call(a);if(e.beforeRead){var i=e.beforeRead(r,h());if(!i){w();return}if((0,l.isPromise)(i)){i.then(e=>{e?b(e):b(r)}).catch(w);return}}b(r)}},x=()=>s("closePreview"),S=t=>{if(e.previewFullImage){var r=e.modelValue.filter(i.isImageFile),o=r.map(e=>(e.objectUrl&&!e.url&&"failed"!==e.status&&(e.url=e.objectUrl,f.push(e.url)),e.url)).filter(Boolean);a=(0,d.showImagePreview)((0,l.extend)({images:o,startPosition:r.indexOf(t),onClose:x},e.previewOptions))}},y=(t,a)=>{var r=e.modelValue.slice(0);r.splice(a,1),s("update:modelValue",r),s("delete",t,h(a))},P=e=>{g.value=!0,m.value=e,(0,r.nextTick)(()=>I())},C=()=>{!g.value&&(m.value=-1),g.value=!1},k=(t,a)=>{var i=["imageFit","deletable","reupload","previewSize","beforeDelete"],o=(0,l.extend)((0,l.pick)(e,i),(0,l.pick)(t,i,!0));return(0,r.createVNode)(c.default,(0,r.mergeProps)({item:t,index:a,onClick:()=>s(e.reupload?"clickReupload":"clickPreview",t,h(a)),onDelete:()=>y(t,a),onPreview:()=>S(t),onReupload:()=>P(a)},(0,l.pick)(e,["name","lazyLoad"]),o),(0,l.pick)(v,["preview-cover","preview-delete"]))},U=()=>{if(e.previewImage)return e.modelValue.map(k)},z=e=>s("clickUpload",e),R=()=>{if(!(e.modelValue.length>=+e.maxCount)||e.reupload){var t=e.modelValue.length>=+e.maxCount&&e.reupload,a=e.readonly?null:(0,r.createVNode)("input",{ref:p,type:"file",class:(0,i.bem)("input"),accept:e.accept,capture:e.capture,multiple:e.multiple&&-1===m.value,disabled:e.disabled,onChange:N,onClick:C},null);return v.default?(0,r.withDirectives)((0,r.createVNode)("div",{class:(0,i.bem)("input-wrapper"),onClick:z},[v.default(),a]),[[r.vShow,!t]]):(0,r.withDirectives)((0,r.createVNode)("div",{class:(0,i.bem)("upload",{readonly:e.readonly}),style:(0,l.getSizeStyle)(e.previewSize),onClick:z},[(0,r.createVNode)(u.Icon,{name:e.uploadIcon,class:(0,i.bem)("upload-icon")},null),e.uploadText&&(0,r.createVNode)("span",{class:(0,i.bem)("upload-text")},[e.uploadText]),a]),[[r.vShow,e.showUpload&&!t]])}},I=()=>{p.value&&!e.disabled&&p.value.click()};return(0,r.onBeforeUnmount)(()=>{f.forEach(e=>URL.revokeObjectURL(e))}),(0,n.useExpose)({chooseFile:I,closeImagePreview:()=>{a&&a.close()}}),(0,o.useCustomFieldValue)(()=>e.modelValue),()=>(0,r.createVNode)("div",{class:(0,i.bem)()},[(0,r.createVNode)("div",{class:(0,i.bem)("wrapper",{disabled:e.disabled})},[U(),R()])])}})},96967:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var r=a("69298"),l=a("5187"),i=a("59633"),o=a("57739"),n=a("35980"),u=a("4341"),d=(0,r.defineComponent)({props:{name:i.numericProp,item:(0,i.makeRequiredProp)(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,reupload:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview","reupload"],setup(e,t){var{emit:a,slots:d}=t,c=()=>{var{status:t,message:a}=e.item;if("uploading"===t||"failed"===t){var n="failed"===t?(0,r.createVNode)(o.Icon,{name:"close",class:(0,l.bem)("mask-icon")},null):(0,r.createVNode)(u.Loading,{class:(0,l.bem)("loading")},null),d=(0,i.isDef)(a)&&""!==a;return(0,r.createVNode)("div",{class:(0,l.bem)("mask")},[n,d&&(0,r.createVNode)("div",{class:(0,l.bem)("mask-message")},[a])])}},s=t=>{var{name:r,item:l,index:o,beforeDelete:n}=e;t.stopPropagation(),(0,i.callInterceptor)(n,{args:[l,{name:r,index:o}],done:()=>a("delete")})},v=()=>a("preview"),p=()=>a("reupload"),f=()=>{if(e.deletable&&"uploading"!==e.item.status){var t=d["preview-delete"];return(0,r.createVNode)("div",{role:"button",class:(0,l.bem)("preview-delete",{shadow:!t}),tabindex:0,"aria-label":(0,l.t)("delete"),onClick:s},[t?t():(0,r.createVNode)(o.Icon,{name:"cross",class:(0,l.bem)("preview-delete-icon")},null)])}},m=()=>{if(d["preview-cover"]){var{index:t,item:a}=e;return(0,r.createVNode)("div",{class:(0,l.bem)("preview-cover")},[d["preview-cover"]((0,i.extend)({index:t},a))])}},g=()=>{var{item:t,lazyLoad:a,imageFit:u,previewSize:d,reupload:c}=e;return(0,l.isImageFile)(t)?(0,r.createVNode)(n.Image,{fit:u,src:t.objectUrl||t.content||t.url,class:(0,l.bem)("preview-image"),width:Array.isArray(d)?d[0]:d,height:Array.isArray(d)?d[1]:d,lazyLoad:a,onClick:c?p:v},{default:m}):(0,r.createVNode)("div",{class:(0,l.bem)("file"),style:(0,i.getSizeStyle)(e.previewSize)},[(0,r.createVNode)(o.Icon,{class:(0,l.bem)("file-icon"),name:"description"},null),(0,r.createVNode)("div",{class:[(0,l.bem)("file-name"),"van-ellipsis"]},[t.file?t.file.name:t.url]),m()])};return()=>(0,r.createVNode)("div",{class:(0,l.bem)("preview")},[g(),c(),f()])}})},38511:function(e){},57765:function(e){}}]);