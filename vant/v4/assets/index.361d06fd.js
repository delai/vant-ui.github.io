import{c as B,p as L,i as N,e as k,d as z,f as j}from"./use-translate.27860f70.js";import{m as y,n as v,a as U,u as O,w as V}from"./with-install.8f167980.js";import{I as q}from"./index.a43dba5a.js";import{P as A}from"./index.e275e566.js";import{L as D}from"./index.0acc8c08.js";import{A as E,y as h,M as F,G,e as i,B as S,x as H,O as _}from"./vue-libs.73c42632.js";import{m as J,u as K}from"./mount-component.a3193047.js";let d=0;function Q(e){e?(d||document.body.classList.add("van-toast--unclickable"),d++):d&&(d--,d||document.body.classList.remove("van-toast--unclickable"))}const[R,c]=B("toast"),W=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],X={icon:String,show:Boolean,type:y("text"),overlay:Boolean,message:v,iconSize:v,duration:U(2e3),position:y("middle"),teleport:[String,Object],className:O,iconPrefix:String,transition:y("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:O,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean},T=E({name:R,props:X,emits:["update:show"],setup(e,{emit:n,slots:s}){let f,l=!1;const r=()=>{const t=e.show&&e.forbidClick;l!==t&&(l=t,Q(l))},u=t=>n("update:show",t),p=()=>{e.closeOnClick&&u(!1)},m=()=>clearTimeout(f),g=()=>{const{icon:t,type:o,iconSize:w,iconPrefix:I,loadingType:M}=e;if(t||o==="success"||o==="fail")return i(q,{name:t||o,size:w,class:c("icon"),classPrefix:I},null);if(o==="loading")return i(D,{class:c("loading"),size:w,type:M},null)},x=()=>{const{type:t,message:o}=e;if(s.message)return i("div",{class:c("text")},[s.message()]);if(N(o)&&o!=="")return t==="html"?i("div",{key:0,class:c("text"),innerHTML:String(o)},null):i("div",{class:c("text")},[o])};return h(()=>[e.show,e.forbidClick],r),h(()=>[e.show,e.type,e.message,e.duration],()=>{m(),e.show&&e.duration>0&&(f=setTimeout(()=>{u(!1)},e.duration))}),F(r),G(r),()=>i(A,S({class:[c([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:p,onClosed:m,"onUpdate:show":u},L(e,W)),{default:()=>[g(),x()]})}}),Y={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let a=[],Z=!1,b=k({},Y);const $=new Map;function P(e){return j(e)?e:{message:e}}function ee(){const{instance:e,unmount:n}=J({setup(){const s=H(""),{open:f,state:l,close:r,toggle:u}=K(),p=()=>{},m=()=>i(T,S(l,{onClosed:p,"onUpdate:show":u}),null);return h(s,g=>{l.message=g}),_().render=m,{open:f,close:r,message:s}}});return e}function ne(){if(!a.length||Z){const e=ee();a.push(e)}return a[a.length-1]}function te(e={}){if(!z)return{};const n=ne(),s=P(e);return n.open(k({},b,$.get(s.type||b.type),s)),n}const C=e=>n=>te(k({type:e},P(n))),de=C("loading"),fe=C("success"),me=C("fail"),ge=e=>{a.length&&(e?(a.forEach(n=>{n.close()}),a=[]):a[0].close())},pe=V(T);export{pe as T,de as a,fe as b,ge as c,me as d,te as s};
