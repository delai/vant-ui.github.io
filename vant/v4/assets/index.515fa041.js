import{c as N,b as j,L as H,i as K,_ as L,n as Q,r as Y,Q as Z,u as q,v as G,a as J}from"./use-translate.7b7055b3.js";import{t as A,n as X,c as ee,m as te,w as $,b as oe,u as z}from"./with-install.a0877b0b.js";import{H as le}from"./constant.e12a51b9.js";import{u as ne}from"./use-id.283fca96.js";import{A as _,u as b,D as B,e as t,H as ae,S as ue,Q as ie,j as se,v as re,B as de,r as pe,o as ce,a as me,w as c,C as e,d as ve,h as fe,t as Ce,F as we}from"./vue-libs.d5ee895a.js";import{u as Ve}from"./use-expose.77504c28.js";import{C as U}from"./index.1a61572e.js";import{I as xe}from"./index.bc61928d.js";import{P as be}from"./index.e2854e14.js";import{S as F}from"./index.22a7313e.js";import{B as ge}from"./index.516742fc.js";import"./use-route.55b36618.js";import"./index.16bdfc10.js";import"./interceptor.adacec7f.js";import"./use-touch.e8c4f7e8.js";import"./use-lazy-render.8319bb4a.js";import"./on-popup-reopen.5b484164.js";import"./index.03cbc9c0.js";import"./index.d7a56972.js";const[M,D]=N("dropdown-menu"),ye={overlay:A,zIndex:X,duration:ee(.2),direction:te("down"),activeColor:String,closeOnClickOutside:A,closeOnClickOverlay:A},W=Symbol(M),Oe=_({name:M,props:ye,setup(a,{slots:u}){const m=ne(),V=b(),s=b(),i=b(0),{children:d,linkChildren:v}=j(W),x=H(V),g=B(()=>d.some(r=>r.state.showWrapper)),y=B(()=>{if(g.value&&K(a.zIndex))return{zIndex:+a.zIndex+1}}),l=()=>{a.closeOnClickOutside&&d.forEach(r=>{r.toggle(!1)})},C=()=>{if(s.value){const r=Y(s);a.direction==="down"?i.value=r.bottom:i.value=Z.value-r.top}},n=()=>{g.value&&C()},S=r=>{d.forEach((o,p)=>{p===r?(C(),o.toggle()):o.state.showPopup&&o.toggle(!1,{immediate:!0})})},T=(r,o)=>{const{showPopup:p}=r.state,{disabled:f,titleClass:O}=r;return t("div",{id:`${m}-${o}`,role:"button",tabindex:f?void 0:0,class:[D("item",{disabled:f}),{[le]:!f}],onClick:()=>{f||S(o)}},[t("span",{class:[D("title",{down:p===(a.direction==="down"),active:p}),O],style:{color:p?a.activeColor:""}},[t("div",{class:"van-ellipsis"},[r.renderTitle()])])])};return v({id:m,props:a,offset:i}),L(V,l),Q("scroll",n,{target:x,passive:!0}),()=>{var r;return t("div",{ref:V,class:D()},[t("div",{ref:s,style:y.value,class:D("bar",{opened:g.value})},[d.map(T)]),(r=u.default)==null?void 0:r.call(u)])}}}),P=$(Oe);function ke(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!ie(a)}const[Pe,E]=N("dropdown-item"),he={title:String,options:oe(),disabled:Boolean,teleport:[String,Object],lazyRender:A,modelValue:z,titleClass:z},De=_({name:Pe,inheritAttrs:!1,props:he,emits:["open","opened","close","closed","change","update:modelValue"],setup(a,{emit:u,slots:m,attrs:V}){const s=ae({showPopup:!1,transition:!0,showWrapper:!1}),{parent:i,index:d}=q(W);if(!i)return;const v=o=>()=>u(o),x=v("open"),g=v("close"),y=v("opened"),l=()=>{s.showWrapper=!1,u("closed")},C=o=>{a.teleport&&o.stopPropagation()},n=(o=!s.showPopup,p={})=>{o!==s.showPopup&&(s.showPopup=o,s.transition=!p.immediate,o&&(s.showWrapper=!0))},S=()=>{if(m.title)return m.title();if(a.title)return a.title;const o=a.options.find(p=>p.value===a.modelValue);return o?o.text:""},T=o=>{const{activeColor:p}=i.props,f=o.value===a.modelValue,O=()=>{s.showPopup=!1,o.value!==a.modelValue&&(u("update:modelValue",o.value),u("change",o.value))},k=()=>{if(f)return t(xe,{class:E("icon"),color:p,name:"success"},null)};return t(U,{role:"menuitem",key:o.value,icon:o.icon,title:o.text,class:E("option",{active:f}),style:{color:f?p:""},tabindex:f?0:-1,clickable:!0,onClick:O},{value:k})},r=()=>{const{offset:o}=i,{zIndex:p,overlay:f,duration:O,direction:k,closeOnClickOverlay:R}=i.props,I=G(p);return k==="down"?I.top=`${o.value}px`:I.bottom=`${o.value}px`,se(t("div",de({style:I,class:E([k]),onClick:C},V),[t(be,{show:s.showPopup,"onUpdate:show":h=>s.showPopup=h,role:"menu",class:E("content"),overlay:f,position:k==="down"?"top":"bottom",duration:s.transition?O:0,lazyRender:a.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${i.id}-${d.value}`,closeOnClickOverlay:R,onOpen:x,onClose:g,onOpened:y,onClosed:l},{default:()=>{var h;return[a.options.map(T),(h=m.default)==null?void 0:h.call(m)]}})]),[[re,s.showWrapper]])};return Ve({state:s,toggle:n,renderTitle:S}),()=>{if(a.teleport){let o;return t(ue,{to:a.teleport},ke(o=r())?o:{default:()=>[o]})}return r()}}}),w=$(De),Ee={style:{padding:"5px 16px"}},Ye=_({__name:"index",setup(a){const u=J({"zh-CN":{disableMenu:"\u7981\u7528\u83DC\u5355",switchTitle1:"\u5305\u90AE",switchTitle2:"\u56E2\u8D2D",itemTitle:"\u7B5B\u9009",expandDirection:"\u5411\u4E0A\u5C55\u5F00",customContent:"\u81EA\u5B9A\u4E49\u83DC\u5355\u5185\u5BB9",customActiveColor:"\u81EA\u5B9A\u4E49\u9009\u4E2D\u6001\u989C\u8272",option1:[{text:"\u5168\u90E8\u5546\u54C1",value:0},{text:"\u65B0\u6B3E\u5546\u54C1",value:1},{text:"\u6D3B\u52A8\u5546\u54C1",value:2}],option2:[{text:"\u9ED8\u8BA4\u6392\u5E8F",value:"a"},{text:"\u597D\u8BC4\u6392\u5E8F",value:"b"},{text:"\u9500\u91CF\u6392\u5E8F",value:"c"}]},"en-US":{disableMenu:"Disable Menu",switchTitle1:"Title",switchTitle2:"Title",itemTitle:"Title",expandDirection:"Expand Direction",customContent:"Custom Content",customActiveColor:"Custom Active Color",option1:[{text:"Option1",value:0},{text:"Option2",value:1},{text:"Option3",value:2}],option2:[{text:"Option A",value:"a"},{text:"Option B",value:"b"},{text:"Option C",value:"c"}]}}),m=b(),V=b(!0),s=b(!1),i=b(0),d=b("a"),v=B(()=>u("option1")),x=B(()=>u("option2")),g=()=>{var y;(y=m.value)==null||y.toggle()};return(y,l)=>{const C=pe("demo-block");return ce(),me(we,null,[t(C,{title:e(u)("basicUsage")},{default:c(()=>[t(e(P),null,{default:c(()=>[t(e(w),{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=n=>i.value=n),options:e(v)},null,8,["modelValue","options"]),t(e(w),{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=n=>d.value=n),options:e(x)},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"]),t(C,{title:e(u)("customContent")},{default:c(()=>[t(e(P),null,{default:c(()=>[t(e(w),{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=n=>i.value=n),options:e(v)},null,8,["modelValue","options"]),t(e(w),{title:e(u)("itemTitle"),ref_key:"item",ref:m},{default:c(()=>[t(e(U),{center:"",title:e(u)("switchTitle1")},{"right-icon":c(()=>[t(e(F),{modelValue:V.value,"onUpdate:modelValue":l[3]||(l[3]=n=>V.value=n)},null,8,["modelValue"])]),_:1},8,["title"]),t(e(U),{center:"",title:e(u)("switchTitle2")},{"right-icon":c(()=>[t(e(F),{modelValue:s.value,"onUpdate:modelValue":l[4]||(l[4]=n=>s.value=n)},null,8,["modelValue"])]),_:1},8,["title"]),ve("div",Ee,[t(e(ge),{type:"primary",block:"",round:"",style:{height:"40px"},onClick:g},{default:c(()=>[fe(Ce(e(u)("confirm")),1)]),_:1})])]),_:1},8,["title"])]),_:1})]),_:1},8,["title"]),t(C,{title:e(u)("customActiveColor")},{default:c(()=>[t(e(P),{"active-color":"#ee0a24"},{default:c(()=>[t(e(w),{modelValue:i.value,"onUpdate:modelValue":l[5]||(l[5]=n=>i.value=n),options:e(v)},null,8,["modelValue","options"]),t(e(w),{modelValue:d.value,"onUpdate:modelValue":l[6]||(l[6]=n=>d.value=n),options:e(x)},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"]),t(C,{title:e(u)("expandDirection")},{default:c(()=>[t(e(P),{direction:"up"},{default:c(()=>[t(e(w),{modelValue:i.value,"onUpdate:modelValue":l[7]||(l[7]=n=>i.value=n),options:e(v)},null,8,["modelValue","options"]),t(e(w),{modelValue:d.value,"onUpdate:modelValue":l[8]||(l[8]=n=>d.value=n),options:e(x)},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"]),t(C,{title:e(u)("disableMenu")},{default:c(()=>[t(e(P),null,{default:c(()=>[t(e(w),{modelValue:i.value,"onUpdate:modelValue":l[9]||(l[9]=n=>i.value=n),disabled:"",options:e(v)},null,8,["modelValue","options"]),t(e(w),{modelValue:d.value,"onUpdate:modelValue":l[10]||(l[10]=n=>d.value=n),disabled:"",options:e(x)},null,8,["modelValue","options"])]),_:1})]),_:1},8,["title"])],64)}}});export{Ye as default};
