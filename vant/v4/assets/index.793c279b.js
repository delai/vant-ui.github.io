import{I as K,J as Te,K as we,c as H,i as q,L as Ce,b as ke,G as Ie,M as xe,o as Be,n as Re,N as Pe,h as p,y as $e,O as ee,p as Ae,r as te,e as Ne,u as Oe,P as ze}from"./use-translate.27860f70.js";import{n as P,t as D,d as V,m as Le,c as E,u as je,w as ie}from"./with-install.8f167980.js";import{A as W,D as I,e as h,Q as oe,x,y as R,M as _e,H as Ee,q as B,J as Me,B as De,E as He,j as We,v as Ze,P as Ve}from"./vue-libs.73c42632.js";import{u as le}from"./use-id.b9a85ecc.js";import{u as J}from"./use-expose.aea2526e.js";import{a as Fe,r as Ke}from"./use-route.3f983808.js";import{S as qe,a as Je}from"./index.97166d61.js";import{b as Ue}from"./constant.80c6de18.js";import{c as Xe}from"./interceptor.de5b6308.js";import{u as Ye}from"./use-refs.7352ad87.js";import{o as Ge}from"./on-popup-reopen.3f7ea527.js";import{S as Qe}from"./index.b8fe9ef8.js";import{B as pe}from"./index.70d893ee.js";function et(e,o,i){let f=0;const a=e.scrollLeft,b=i===0?1:Math.round(i*1e3/16);function c(){e.scrollLeft+=(o-a)/b,++f<b&&K(c)}c()}function tt(e,o,i,f){let a=Te(e);const b=a<o,c=i===0?1:Math.round(i*1e3/16),u=(o-a)/c;function r(){a+=u,(b&&a>o||!b&&a<o)&&(a=o),we(e,a),b&&a<o||!b&&a>o?K(r):f&&K(f)}r()}function nt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!oe(e)}const[at,ne]=H("tab"),it=W({name:at,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:P,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:D},setup(e,{slots:o}){const i=I(()=>{const a={},{type:b,color:c,disabled:u,isActive:r,activeColor:y,inactiveColor:v}=e;c&&b==="card"&&(a.borderColor=c,u||(r?a.backgroundColor=c:a.color=c));const w=r?y:v;return w&&(a.color=w),a}),f=()=>{const a=h("span",{class:ne("text",{ellipsis:!e.scrollable})},[o.title?o.title():e.title]);return e.dot||q(e.badge)&&e.badge!==""?h(pe,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},nt(a)?a:{default:()=>[a]}):a};return()=>h("div",{id:e.id,role:"tab",class:[ne([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:i.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[f()])}});function ot(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!oe(e)}const[lt,ae]=H("tabs"),rt=W({name:lt,props:{count:V(Number),inited:Boolean,animated:Boolean,duration:V(P),swipeable:Boolean,lazyRender:Boolean,currentIndex:V(Number)},emits:["change"],setup(e,{emit:o,slots:i}){const f=x(),a=u=>o("change",u),b=()=>{var r;const u=(r=i.default)==null?void 0:r.call(i);return e.animated||e.swipeable?h(qe,{ref:f,loop:!1,class:ae("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:a},ot(u)?u:{default:()=>[u]}):u},c=u=>{const r=f.value;r&&r.state.active!==u&&r.swipeTo(u,{immediate:!e.inited})};return R(()=>e.currentIndex,c),_e(()=>{c(e.currentIndex)}),J({swipeRef:f}),()=>h("div",{class:ae("content",{animated:e.animated||e.swipeable})},[b()])}}),[re,M]=H("tabs"),ct={type:Le("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:E(0),duration:E(.3),animated:Boolean,ellipsis:D,swipeable:Boolean,scrollspy:Boolean,offsetTop:E(0),background:String,lazyRender:D,lineWidth:P,lineHeight:P,beforeChange:Function,swipeThreshold:E(5),titleActiveColor:String,titleInactiveColor:String},ce=Symbol(re),st=W({name:re,props:ct,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:o,slots:i}){let f,a,b;const c=x(),u=x(),r=x(),y=x(),v=le(),S=Ce(c),[w,A]=Ye(),{children:s,linkChildren:N}=ke(ce),d=Ee({inited:!1,position:"",lineStyle:{},currentIndex:-1}),$=I(()=>s.length>e.swipeThreshold||!e.ellipsis||e.shrink),O=I(()=>({borderColor:e.color,background:e.background})),C=(t,n)=>{var l;return(l=t.name)!=null?l:n},U=I(()=>{const t=s[d.currentIndex];if(t)return C(t,d.currentIndex)}),Z=I(()=>Ie(e.offsetTop)),X=I(()=>e.sticky?Z.value+f:0),z=t=>{const n=u.value,l=w.value;if(!$.value||!n||!l||!l[d.currentIndex])return;const m=l[d.currentIndex].$el,g=m.offsetLeft-(n.offsetWidth-m.offsetWidth)/2;et(n,g,t?0:+e.duration)},k=()=>{const t=d.inited;B(()=>{const n=w.value;if(!n||!n[d.currentIndex]||e.type!=="line"||Pe(c.value))return;const l=n[d.currentIndex].$el,{lineWidth:m,lineHeight:g}=e,T=l.offsetLeft+l.offsetWidth/2,_={width:p(m),backgroundColor:e.color,transform:`translateX(${T}px) translateX(-50%)`};if(t&&(_.transitionDuration=`${e.duration}s`),q(g)){const Q=p(g);_.height=Q,_.borderRadius=Q}d.lineStyle=_})},de=t=>{const n=t<d.currentIndex?-1:1;for(;t>=0&&t<s.length;){if(!s[t].disabled)return t;t+=n}},L=(t,n)=>{const l=de(t);if(!q(l))return;const m=s[l],g=C(m,l),T=d.currentIndex!==null;d.currentIndex=l,g!==e.active&&(o("update:active",g),T&&o("change",g,m.title)),n||z(),k(),b&&!e.scrollspy&&$e(Math.ceil(ee(c.value)-Z.value))},j=(t,n)=>{const l=s.find((g,T)=>C(g,T)===t),m=l?s.indexOf(l):0;L(m,n)},Y=(t=!1)=>{if(e.scrollspy){const n=s[d.currentIndex].$el;if(n&&S.value){const l=ee(n,S.value)-X.value;a=!0,tt(S.value,l,t?0:+e.duration,()=>{a=!1})}}},ue=(t,n,l)=>{const{title:m,disabled:g}=s[n],T=C(s[n],n);g||(Xe(e.beforeChange,{args:[T],done:()=>{L(n),Y()}}),Fe(t)),o("clickTab",{name:T,title:m,event:l,disabled:g})},fe=t=>{b=t.isFixed,o("scroll",t)},be=t=>{B(()=>{j(t),Y(!0)})},ve=()=>{for(let t=0;t<s.length;t++){const{top:n}=te(s[t].$el);if(n>X.value)return t===0?0:t-1}return s.length-1},he=()=>{if(e.scrollspy&&!a){const t=ve();L(t)}},me=()=>s.map((t,n)=>h(it,De({key:t.id,id:`${v}-${n}`,ref:A(n),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:n===d.currentIndex,controls:t.id,scrollable:$.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:l=>ue(t,n,l)},Ae(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),ge=()=>{if(e.type==="line"&&s.length)return h("div",{class:M("line"),style:d.lineStyle},null)},G=()=>{var l,m;const{type:t,border:n}=e;return h("div",{ref:r,class:[M("wrap"),{[Ue]:t==="line"&&n}]},[h("div",{ref:u,role:"tablist",class:M("nav",[t,{shrink:e.shrink,complete:$.value}]),style:O.value,"aria-orientation":"horizontal"},[(l=i["nav-left"])==null?void 0:l.call(i),me(),ge(),(m=i["nav-right"])==null?void 0:m.call(i)])])};R([()=>e.color,xe],k),R(()=>e.active,t=>{t!==U.value&&j(t)}),R(()=>s.length,()=>{d.inited&&(j(e.active),k(),B(()=>{z(!0)}))});const ye=()=>{j(e.active,!0),B(()=>{d.inited=!0,r.value&&(f=te(r.value).height),z(!0)})},Se=(t,n)=>o("rendered",t,n);return J({resize:()=>{k(),B(()=>{var t,n;return(n=(t=y.value)==null?void 0:t.swipeRef.value)==null?void 0:n.resize()})},scrollTo:be}),Me(k),Ge(k),Be(ye),Re("scroll",he,{target:S,passive:!0}),N({id:v,props:e,setLine:k,onRendered:Se,currentName:U,scrollIntoView:z}),()=>{var t;return h("div",{ref:c,class:M([e.type])},[e.sticky?h(Qe,{container:c.value,offsetTop:Z.value,onScroll:fe},{default:()=>{var n;return[G(),(n=i["nav-bottom"])==null?void 0:n.call(i)]}}):[G(),(t=i["nav-bottom"])==null?void 0:t.call(i)],h(rt,{ref:y,count:s.length,inited:d.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:d.currentIndex,onChange:L},{default:()=>{var n;return[(n=i.default)==null?void 0:n.call(i)]}})])}}}),se=Symbol(),Rt=()=>He(se,null),[dt,F]=H("tab"),ut=Ne({},Ke,{dot:Boolean,name:P,badge:P,title:String,disabled:Boolean,titleClass:je,titleStyle:[String,Object],showZeroBadge:D}),ft=W({name:dt,props:ut,setup(e,{slots:o}){const i=le(),f=x(!1),{parent:a,index:b}=Oe(ce);if(!a)return;const c=()=>{var v;return(v=e.name)!=null?v:b.value},u=()=>{f.value=!0,a.props.lazyRender&&B(()=>{a.onRendered(c(),e.title)})},r=I(()=>{const v=c()===a.currentName.value;return v&&!f.value&&u(),v}),y=x(!r.value);return R(r,v=>{v?y.value=!1:ze(()=>{y.value=!0})}),R(()=>e.title,()=>{a.setLine(),a.scrollIntoView()}),Ve(se,r),()=>{var O;const v=`${a.id}-${b.value}`,{animated:S,swipeable:w,scrollspy:A,lazyRender:s}=a.props;if(!o.default&&!S)return;const N=A||r.value;if(S||w)return h(Je,{id:i,role:"tabpanel",class:F("panel-wrapper",{inactive:y.value}),tabindex:r.value?0:-1,"aria-hidden":!r.value,"aria-labelledby":v},{default:()=>{var C;return[h("div",{class:F("panel")},[(C=o.default)==null?void 0:C.call(o)])]}});const $=f.value||A||!s?(O=o.default)==null?void 0:O.call(o):null;return J({id:i}),We(h("div",{id:i,role:"tabpanel",class:F("panel"),tabindex:N?0:-1,"aria-labelledby":v},[$]),[[Ze,N]])}}}),Pt=ie(ft),$t=ie(st);export{$t as T,Pt as a,Rt as u};
